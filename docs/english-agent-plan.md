# Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-Ğ¿Ğ»Ğ°Ğ½: AI-Ğ°Ğ³ĞµĞ½Ñ‚ Ğ´Ğ»Ñ Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ñ Ğ°Ğ½Ğ³Ğ»Ğ¸Ğ¹ÑĞºĞ¾Ğ¼Ñƒ ÑĞ·Ñ‹ĞºÑƒ

> Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚ Ğ°Ğ´Ğ°Ğ¿Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½ Ğ¿Ğ¾Ğ´ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰ÑƒÑ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ñƒ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ° **itvibe-party** â€” full-stack Ğ¼Ğ¾Ğ½Ğ¾Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¹ (uWebSockets.js + Vue 3 + Drizzle ORM). Ğ’ĞºĞ»ÑÑ‡Ğ°ĞµÑ‚ Ğ¿Ğ»Ğ°Ğ½ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸ Ñ MySQL Ğ½Ğ° PostgreSQL + pgvector.

---

## 1. ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ğ°

Ğ˜Ğ½Ñ‚ĞµÑ€Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ AI-Ğ°Ğ³ĞµĞ½Ñ‚, Ğ²ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ² ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰ÑƒÑ Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ñƒ itvibe-party, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğ¹ Ğ¾Ğ±ÑƒÑ‡Ğ°ĞµÑ‚ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ğ°Ğ½Ğ³Ğ»Ğ¸Ğ¹ÑĞºĞ¾Ğ¼Ñƒ ÑĞ·Ñ‹ĞºÑƒ Ñ‡ĞµÑ€ĞµĞ· Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğµ Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ğ² Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğµ Ñ‡Ğ°Ñ‚Ğ° Ğ¸ Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ´Ğ¸Ğ°Ğ»Ğ¾Ğ³Ğ°. ĞĞ³ĞµĞ½Ñ‚ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰ÑƒÑ Ğ¸Ğ½Ñ„Ñ€Ğ°ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñƒ Ğ¼ĞµÑÑĞµĞ½Ğ´Ğ¶ĞµÑ€Ğ° (WebSocket, Ñ‡Ğ°Ñ‚-ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹, push-ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ) Ğ¸ Ñ€Ğ°ÑÑˆĞ¸Ñ€ÑĞµÑ‚ ĞµÑ‘ AI-Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑĞ¼Ğ¸.

---

## 2. ĞĞ½Ğ°Ğ»Ğ¸Ğ· ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰ĞµĞ³Ğ¾ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

### 2.1. Ğ¢ĞµĞºÑƒÑ‰Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

```
packages/
â”œâ”€â”€ backend/          â€” uWebSockets.js API-ÑĞµÑ€Ğ²ĞµÑ€ (TypeScript, Drizzle ORM, Redis, ArkType)
â”œâ”€â”€ frontend/         â€” Vue 3 SPA (Pinia, Vue Router, Vite)
â”œâ”€â”€ shared/           â€” ArkType-ÑÑ…ĞµĞ¼Ñ‹, Ñ‚Ğ¸Ğ¿Ñ‹, enums
â””â”€â”€ api-playground/   â€” Ğ¸Ğ½Ñ‚ĞµÑ€Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ°Ñ API-Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ
```

### 2.2. Ğ¡ÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ°Ñ Ğ±Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… (MySQL, 13 Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†)

| Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° | ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ | ĞŸĞµÑ€ĞµĞ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ´Ğ»Ñ AI-Ğ°Ğ³ĞµĞ½Ñ‚Ğ° |
|---------|-----------|-------------------------------|
| `users` | ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğ¸ (id, name, email, password, phone, isAdmin) | **ĞŸÑ€ÑĞ¼Ğ¾Ğµ** â€” Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ = ÑƒÑ‡ĞµĞ½Ğ¸Ğº |
| `contact_list` | Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº ĞºĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ğ¾Ğ² (userId, contactId, status, unreadCount, lastMessage) | **Ğ Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ğµ** â€” Ğ°Ğ³ĞµĞ½Ñ‚ ĞºĞ°Ğº ÑĞ¿ĞµÑ†Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ ĞºĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚ |
| `messages` | Ğ¡Ğ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ (sender/receiver, type: TEXT/IMAGE/VIDEO/AUDIO/FILE, content, src) | **Ğ Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ğµ** â€” ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¼ Ğ¸ AI |
| `invitations` | Ğ˜Ğ½Ğ²Ğ°Ğ¹Ñ‚Ñ‹ (token, userId, invitedId, expiresAt) | Ğ‘ĞµĞ· Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹ |
| `notes` | Ğ—Ğ°Ğ¼ĞµÑ‚ĞºĞ¸ (title, description, userId) | **ĞšĞ¾ÑĞ²ĞµĞ½Ğ½Ğ¾Ğµ** â€” ÑĞ»Ğ¾Ğ²Ğ°Ñ€Ğ½Ñ‹Ğµ Ğ·Ğ°Ğ¼ĞµÑ‚ĞºĞ¸ ÑƒÑ‡ĞµĞ½Ğ¸ĞºĞ° |
| `notes_photos` | Ğ¤Ğ¾Ñ‚Ğ¾ Ğº Ğ·Ğ°Ğ¼ĞµÑ‚ĞºĞ°Ğ¼ (noteId, src, filename, size) | Ğ‘ĞµĞ· Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹ |
| `calendar` | Ğ¡Ğ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ (title, description, startTime, endTime, userId) | **ĞŸÑ€ÑĞ¼Ğ¾Ğµ** â€” Ñ€Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ ÑƒÑ€Ğ¾ĞºĞ¾Ğ² |
| `tasks` | Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ¸ (title, status, priority, progress, projectId, parentTaskId) | **ĞŸÑ€ÑĞ¼Ğ¾Ğµ** â€” Ğ´Ğ¾Ğ¼Ğ°ÑˆĞ½Ğ¸Ğµ Ğ·Ğ°Ğ´Ğ°Ğ½Ğ¸Ñ, ÑƒĞ¿Ñ€Ğ°Ğ¶Ğ½ĞµĞ½Ğ¸Ñ |
| `projects` | ĞŸÑ€Ğ¾ĞµĞºÑ‚Ñ‹ (title, status, priority, progress) | **ĞŸÑ€ÑĞ¼Ğ¾Ğµ** â€” ÑƒÑ‡ĞµĞ±Ğ½Ñ‹Ğ¹ Ğ¿Ğ»Ğ°Ğ½ ĞºĞ°Ğº Ğ¿Ñ€Ğ¾ĞµĞºÑ‚ |
| `project_tags` | Ğ¢ĞµĞ³Ğ¸ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ¾Ğ² | Ğ‘ĞµĞ· Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹ |
| `project_assignees` | Ğ£Ñ‡Ğ°ÑÑ‚Ğ½Ğ¸ĞºĞ¸ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ¾Ğ² | Ğ‘ĞµĞ· Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹ |
| `push_subscriptions` | Push-Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ¸ (endpoint, keys, deviceInfo) | **ĞŸÑ€ÑĞ¼Ğ¾Ğµ** â€” Ğ½Ğ°Ğ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°Ğ½Ğ¸Ñ Ğ¾Ğ± ÑƒÑ€Ğ¾ĞºĞ°Ñ… |
| `push_notifications_log` | Ğ›Ğ¾Ğ³ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğ¹ | **ĞŸÑ€ÑĞ¼Ğ¾Ğµ** â€” Ğ¾Ñ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ´Ğ¾ÑÑ‚Ğ°Ğ²ĞºĞ¸ |

### 2.3. Ğ¡ÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğ¹ Ñ‡Ğ°Ñ‚-Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ» (Ñ‡Ñ‚Ğ¾ Ğ¿ĞµÑ€ĞµĞ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ)

**Backend (Ğ¿Ğ¾Ğ»Ğ½Ğ¾ÑÑ‚ÑŒÑ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ¾):**
- `message-controller.ts` â€” getMessages, sendChatMessage, deleteMessage, editMessage, markAsRead
- `chat-list-controller.ts` â€” getContactList, createChat, deleteChat
- `message-service.ts` â€” Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹, S3-Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ², Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ MIME
- `broadcast-service.ts` â€” real-time Ğ´Ğ¾ÑÑ‚Ğ°Ğ²ĞºĞ° Ñ‡ĞµÑ€ĞµĞ· WebSocket
- `ws-service.ts` â€” readMessage, typing-Ğ¸Ğ½Ğ´Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ñ‹
- `message-repository.ts` â€” CRUD, markAllAsRead, findConversation, unreadCount
- `contact-list-repository.ts` â€” ĞºĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ñ‹ Ñ Ğ´ĞµÑ‚Ğ°Ğ»ÑĞ¼Ğ¸ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½ĞµĞ³Ğ¾ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ

**Frontend (Ğ¿Ğ¾Ğ»Ğ½Ğ¾ÑÑ‚ÑŒÑ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ¾):**
- `ChatArea.vue` â€” Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ Ñ‡Ğ°Ñ‚Ğ° (Ğ²Ğ²Ğ¾Ğ´ Ñ‚ĞµĞºÑÑ‚Ğ°, drag-drop Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ², ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğ½Ğ¾Ğµ Ğ¼ĞµĞ½Ñ)
- `MessageItem.vue` â€” Ñ€ĞµĞ½Ğ´ĞµÑ€Ğ¸Ğ½Ğ³ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ (TEXT, IMAGE, VIDEO, AUDIO, FILE), Ğ°ÑƒĞ´Ğ¸Ğ¾-Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
- `ContactsList.vue` â€” ÑĞ¿Ğ¸ÑĞ¾Ğº ĞºĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ğ¾Ğ², unread-Ğ±ĞµĞ¹Ğ´Ğ¶Ğ¸, online-ÑÑ‚Ğ°Ñ‚ÑƒÑ, Ğ¿Ğ¾Ğ¸ÑĞº
- `VoiceInput.vue` â€” Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ¾Ğ¹ Ğ²Ğ²Ğ¾Ğ´ (ÑƒĞ¶Ğµ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½)
- `AudioWaveform.vue` â€” Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ°ÑƒĞ´Ğ¸Ğ¾-Ñ„Ğ¾Ñ€Ğ¼Ñ‹
- `VideoCallModal.vue` â€” WebRTC Ğ²Ğ¸Ğ´ĞµĞ¾/Ğ°ÑƒĞ´Ğ¸Ğ¾ Ğ·Ğ²Ğ¾Ğ½ĞºĞ¸
- `messagesStore` â€” Ñ…Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸Ñ‰Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹
- `contactsStore` â€” Ñ…Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸Ñ‰Ğµ ĞºĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ğ¾Ğ²
- `stateStore` â€” dark mode, PWA, push-ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ, WebRTC-ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ
- `websocket-base.ts` â€” WebSocket-ĞºĞ»Ğ¸ĞµĞ½Ñ‚ Ñ Ñ€ĞµĞºĞ¾Ğ½Ğ½ĞµĞºÑ‚Ğ¾Ğ¼ Ğ¸ heartbeat
- `useBroadcastHandler.ts` â€” Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° real-time ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹

**Shared (Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ¾):**
- ArkType-ÑÑ…ĞµĞ¼Ñ‹ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ğ¸ Ğ´Ğ»Ñ Ğ²ÑĞµÑ… chat/message ÑĞ½Ğ´Ğ¿Ğ¾Ğ¸Ğ½Ñ‚Ğ¾Ğ²
- Ğ¢Ğ¸Ğ¿Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ response-ÑÑ…ĞµĞ¼Ñ‹ Ğ´Ğ»Ñ ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»Ğ»ĞµÑ€Ğ¾Ğ²

### 2.4. ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ²Ñ‹Ğ²Ğ¾Ğ´Ñ‹ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ°

| ĞĞ±Ğ»Ğ°ÑÑ‚ÑŒ | Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ | ĞšĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸Ğ¹ |
|---------|--------|-------------|
| Ğ§Ğ°Ñ‚ (Ñ‚ĞµĞºÑÑ‚) | **100% Ğ³Ğ¾Ñ‚Ğ¾Ğ²** | ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ Ñ†Ğ¸ĞºĞ»: Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° â†’ Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ â†’ Ğ´Ğ¾ÑÑ‚Ğ°Ğ²ĞºĞ° â†’ Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ |
| Ğ“Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ¾Ğ¹ Ğ²Ğ²Ğ¾Ğ´ | **80% Ğ³Ğ¾Ñ‚Ğ¾Ğ²** | VoiceInput.vue + AudioWaveform.vue ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‚, Ğ½ÑƒĞ¶Ğ½Ğ° Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ STT |
| Ğ“Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ¾Ğ¹ Ğ²Ñ‹Ğ²Ğ¾Ğ´ | **0%** | Ğ¢Ñ€ĞµĞ±ÑƒĞµÑ‚ÑÑ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ ElevenLabs |
| WebSocket real-time | **100% Ğ³Ğ¾Ñ‚Ğ¾Ğ²** | Broadcast, typing, online status |
| Push-ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ | **100% Ğ³Ğ¾Ñ‚Ğ¾Ğ²** | ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ Ñ†Ğ¸ĞºĞ» Ñ VAPID, device fingerprinting |
| Ğ¤Ğ°Ğ¹Ğ»Ğ¾Ğ²Ğ¾Ğµ Ñ…Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸Ñ‰Ğµ | **100% Ğ³Ğ¾Ñ‚Ğ¾Ğ²** | S3 Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ğ´Ğ»Ñ Ğ¼ĞµĞ´Ğ¸Ğ° |
| ĞĞ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ/ÑĞµÑÑĞ¸Ğ¸ | **100% Ğ³Ğ¾Ñ‚Ğ¾Ğ²** | Redis sessions, auth guard, token-based WS |
| ĞšĞ°Ğ»ĞµĞ½Ğ´Ğ°Ñ€ÑŒ | **100% Ğ³Ğ¾Ñ‚Ğ¾Ğ²** | CRUD ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹ â€” Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´Ğ¸Ñ‚ Ğ´Ğ»Ñ Ñ€Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ ÑƒÑ€Ğ¾ĞºĞ¾Ğ² |
| Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ¸ | **100% Ğ³Ğ¾Ñ‚Ğ¾Ğ²** | ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ CRUD Ñ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑĞ¾Ğ¼, Ğ¿Ñ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚Ğ°Ğ¼Ğ¸, Ğ¿Ğ¾Ğ´Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ°Ğ¼Ğ¸ |
| ĞŸÑ€Ğ¾ĞµĞºÑ‚Ñ‹ | **100% Ğ³Ğ¾Ñ‚Ğ¾Ğ²** | Ğ˜Ğ´ĞµĞ°Ğ»ÑŒĞ½Ğ¾ Ğ´Ğ»Ñ ÑƒÑ‡ĞµĞ±Ğ½Ñ‹Ñ… Ğ¿Ğ»Ğ°Ğ½Ğ¾Ğ² |
| AI-Ğ´Ğ²Ğ¸Ğ¶Ğ¾Ğº | **0%** | Ğ¢Ñ€ĞµĞ±ÑƒĞµÑ‚ÑÑ Ğ¿Ğ¾Ğ»Ğ½Ğ°Ñ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ |
| pgvector/Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒ | **0%** | Ğ¢Ñ€ĞµĞ±ÑƒĞµÑ‚ÑÑ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ñ Ğ‘Ğ” Ğ¸ Ğ½Ğ¾Ğ²Ñ‹Ğµ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹ |

---

## 3. ĞœĞ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ñ MySQL â†’ PostgreSQL + pgvector

### 3.1. ĞĞ±Ğ¾ÑĞ½Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸

| ĞšÑ€Ğ¸Ñ‚ĞµÑ€Ğ¸Ğ¹ | MySQL | PostgreSQL + pgvector |
|----------|-------|----------------------|
| Ğ’ĞµĞºÑ‚Ğ¾Ñ€Ğ½Ñ‹Ğ¹ Ğ¿Ğ¾Ğ¸ÑĞº | ĞĞµ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµÑ‚ÑÑ | ĞĞ°Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ Ñ‡ĞµÑ€ĞµĞ· pgvector |
| JSONB | ĞĞ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ½Ñ‹Ğ¹ JSON | ĞŸĞ¾Ğ»Ğ½Ğ¾Ñ†ĞµĞ½Ğ½Ñ‹Ğ¹ JSONB Ñ Ğ¸Ğ½Ğ´ĞµĞºÑĞ°Ğ¼Ğ¸ |
| Full-text search | Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹ | ĞŸÑ€Ğ¾Ğ´Ğ²Ğ¸Ğ½ÑƒÑ‚Ñ‹Ğ¹ (tsvector, tsquery) |
| ĞœĞ°ÑÑĞ¸Ğ²Ñ‹ | ĞĞµÑ‚ | ĞĞ°Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ğµ Ğ¼Ğ°ÑÑĞ¸Ğ²Ñ‹ |
| Ğ Ğ°ÑÑˆĞ¸Ñ€ÑĞµĞ¼Ğ¾ÑÑ‚ÑŒ | ĞĞ¸Ğ·ĞºĞ°Ñ | Ğ’Ñ‹ÑĞ¾ĞºĞ°Ñ (extensions) |
| Drizzle ORM | ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµÑ‚ÑÑ | ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµÑ‚ÑÑ (drizzle-orm/pg-core) |
| Ğ’Ğ½ĞµÑˆĞ½Ğ¸Ğ¹ ÑĞµÑ€Ğ²Ğ¸Ñ Ğ´Ğ»Ñ Ğ²ĞµĞºÑ‚Ğ¾Ñ€Ğ¾Ğ² | ĞÑƒĞ¶ĞµĞ½ Pinecone ($70+/Ğ¼ĞµÑ) | Ğ’ÑÑ‘ Ğ² Ğ¾Ğ´Ğ½Ğ¾Ğ¹ Ğ‘Ğ” â€” $0 Ğ´Ğ¾Ğ¿. Ğ·Ğ°Ñ‚Ñ€Ğ°Ñ‚ |

### 3.2. ĞŸĞ»Ğ°Ğ½ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸

**Ğ¤Ğ°Ğ·Ğ° 0 (Ğ¿Ñ€ĞµĞ´Ğ²Ğ°Ñ€Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾, Ğ´Ğ¾ Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ° Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ AI-Ğ°Ğ³ĞµĞ½Ñ‚Ğ°):**

#### Ğ¨Ğ°Ğ³ 1: Ğ—Ğ°Ğ¼ĞµĞ½Ğ° Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ĞµĞ¹

```diff
# packages/backend/package.json
- "mysql2": "^3.x"
+ "pg": "^8.x"
+ "@types/pg": "^8.x"

# drizzle.config.js
- dialect: 'mysql'
+ dialect: 'postgresql'
```

#### Ğ¨Ğ°Ğ³ 2: ĞœĞ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ñ Drizzle-ÑÑ…ĞµĞ¼Ñ‹

```diff
# packages/backend/src/drizzle/schema/
- import { mysqlTable, bigint, varchar, text, boolean, datetime, mysqlEnum } from 'drizzle-orm/mysql-core'
+ import { pgTable, bigserial, varchar, text, boolean, timestamp, pgEnum, vector, jsonb, integer, real } from 'drizzle-orm/pg-core'
```

**ĞœĞ°Ğ¿Ğ¿Ğ¸Ğ½Ğ³ Ñ‚Ğ¸Ğ¿Ğ¾Ğ²:**

| MySQL | PostgreSQL | ĞŸÑ€Ğ¸Ğ¼ĞµÑ‡Ğ°Ğ½Ğ¸Ğµ |
|-------|-----------|------------|
| `bigint('id').unsigned().autoincrement()` | `bigserial('id')` | ĞĞ²Ñ‚Ğ¾-Ğ¸Ğ½ĞºÑ€ĞµĞ¼ĞµĞ½Ñ‚ |
| `varchar(N)` | `varchar(N)` | Ğ‘ĞµĞ· Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹ |
| `text` | `text` | Ğ‘ĞµĞ· Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹ |
| `boolean` | `boolean` | Ğ‘ĞµĞ· Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹ |
| `datetime` | `timestamp` | Ğ¡ timezone |
| `mysqlEnum('col', [...])` | `pgEnum('col', [...])` | ĞĞ±ÑŠÑĞ²Ğ»ÑĞµÑ‚ÑÑ Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ğ¾ |
| `json` | `jsonb` | Ğ˜Ğ½Ğ´ĞµĞºÑĞ¸Ñ€ÑƒĞµĞ¼Ñ‹Ğ¹ JSONB |
| â€” | `vector('embedding', { dimensions: 1536 })` | **ĞĞ¾Ğ²Ğ¾Ğµ** â€” pgvector |

#### Ğ¨Ğ°Ğ³ 3: ĞœĞ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

```bash
# 1. Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚ Ğ¸Ğ· MySQL
mysqldump --compatible=postgresql cosmetology > dump.sql

# 2. ĞšĞ¾Ğ½Ğ²ĞµÑ€Ñ‚Ğ°Ñ†Ğ¸Ñ (pgloader â€” Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ¼Ğ°Ğ¿Ğ¿Ğ¸Ğ½Ğ³)
pgloader mysql://user:pass@localhost/cosmetology \
         postgresql://user:pass@localhost/cosmetology

# 3. Ğ’ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ñ pgvector
psql -d cosmetology -c "CREATE EXTENSION IF NOT EXISTS vector;"

# 4. Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ½Ğ¾Ğ²Ñ‹Ñ… Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¹ Drizzle
pnpm --filter backend db:generate
pnpm --filter backend db:migrate
```

#### Ğ¨Ğ°Ğ³ 4: ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğ¹

```diff
# packages/backend/src/database/mysql.ts â†’ postgres.ts
- import mysql from 'mysql2/promise'
- const pool = mysql.createPool({ ... })
+ import { Pool } from 'pg'
+ const pool = new Pool({ ... })

# packages/backend/src/database/index.ts
- import { drizzle } from 'drizzle-orm/mysql2'
+ import { drizzle } from 'drizzle-orm/node-postgres'
```

#### Ğ¨Ğ°Ğ³ 5: ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ env-Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ…

```diff
# packages/backend/.env
- MYSQL_HOST=localhost
- MYSQL_PORT=3306
- MYSQL_USER=root
- MYSQL_PASSWORD=secret
- MYSQL_DB_NAME=cosmetology
+ PG_HOST=localhost
+ PG_PORT=5432
+ PG_USER=postgres
+ PG_PASSWORD=secret
+ PG_DB_NAME=cosmetology
```

### 3.3. Ğ¡ÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğµ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹ Ğ¿Ğ¾ÑĞ»Ğµ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸ (PostgreSQL)

```sql
-- Ğ’ÑĞµ 13 ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ñ… Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ† Ğ¼Ğ¸Ğ³Ñ€Ğ¸Ñ€ÑƒÑÑ‚ 1:1
-- ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ:
--   bigint unsigned â†’ bigserial
--   datetime â†’ timestamp with time zone
--   mysqlEnum â†’ pgEnum
--   json â†’ jsonb
```

---

## 4. ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¼Ğ¾Ğ´ÑƒĞ»Ğ¸

### 4.1. ĞœĞ¾Ğ´ÑƒĞ»ÑŒ ĞºĞ¾Ğ¼Ğ¼ÑƒĞ½Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸ (Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ğµ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰ĞµĞ³Ğ¾ Ñ‡Ğ°Ñ‚Ğ°)

**Ğ§Ñ‚Ğ¾ ÑƒĞ¶Ğµ ĞµÑÑ‚ÑŒ:**

| ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ | Ğ¤Ğ°Ğ¹Ğ» | Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ |
|-----------|------|--------|
| Ğ¢ĞµĞºÑÑ‚Ğ¾Ğ²Ñ‹Ğ¹ Ñ‡Ğ°Ñ‚ | `ChatArea.vue` + `MessageItem.vue` | Ğ“Ğ¾Ñ‚Ğ¾Ğ² |
| Ğ“Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ¾Ğ¹ Ğ²Ğ²Ğ¾Ğ´ | `VoiceInput.vue` | Ğ“Ğ¾Ñ‚Ğ¾Ğ² (Web Audio API) |
| ĞÑƒĞ´Ğ¸Ğ¾-Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ | `AudioWaveform.vue` | Ğ“Ğ¾Ñ‚Ğ¾Ğ² |
| Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ² | `message-service.ts` (S3) | Ğ“Ğ¾Ñ‚Ğ¾Ğ² |
| WebSocket broadcast | `broadcast-service.ts` | Ğ“Ğ¾Ñ‚Ğ¾Ğ² |
| Typing-Ğ¸Ğ½Ğ´Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€ | `ws-api-controller.ts` â†’ `event_typing` | Ğ“Ğ¾Ñ‚Ğ¾Ğ² |
| Push-ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ | `push-subscription-service.ts` | Ğ“Ğ¾Ñ‚Ğ¾Ğ² |

**Ğ§Ñ‚Ğ¾ Ğ½ÑƒĞ¶Ğ½Ğ¾ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ:**

| ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ | Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ |
|-----------|----------|------------|
| AI Response Engine | ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ Ñ‡ĞµÑ€ĞµĞ· LLM | ĞĞ¾Ğ²Ñ‹Ğ¹ ÑĞµÑ€Ğ²Ğ¸Ñ `ai-agent-service.ts` |
| ElevenLabs TTS | ĞĞ·Ğ²ÑƒÑ‡Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ¾Ğ² Ğ°Ğ³ĞµĞ½Ñ‚Ğ° | ĞĞ¾Ğ²Ñ‹Ğ¹ ÑĞµÑ€Ğ²Ğ¸Ñ `tts-service.ts` |
| Whisper STT | Ğ¢Ñ€Ğ°Ğ½ÑĞºÑ€Ğ¸Ğ¿Ñ†Ğ¸Ñ Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ñ‹Ñ… ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ | ĞĞ¾Ğ²Ñ‹Ğ¹ ÑĞµÑ€Ğ²Ğ¸Ñ `stt-service.ts` |
| AI Message Renderer | ĞÑ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ AI-ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ Ñ ĞºĞ¾Ñ€Ñ€ĞµĞºÑ†Ğ¸ÑĞ¼Ğ¸ | Ğ Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ğµ `MessageItem.vue` |
| Voice Mode Toggle | ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ°Ñ‚ĞµĞ»ÑŒ Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ¾Ğ³Ğ¾ Ñ€ĞµĞ¶Ğ¸Ğ¼Ğ° | Ğ Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ğµ `ChatArea.vue` |

**ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ:**

```
ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ
    â†“
[Ğ¡ÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğ¹] ChatArea.vue â†’ messagesApi.sendChatMessage()
    â†“
[Ğ¡ÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğ¹] message-controller.ts â†’ message-service.ts
    â†“ (ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ² Ğ‘Ğ”, broadcast)
[ĞĞĞ’ĞĞ•] AI Agent Pipeline:
    â”œâ”€â”€ 1. stt-service.ts (ĞµÑĞ»Ğ¸ Ñ‚Ğ¸Ğ¿ AUDIO â†’ Ñ‚Ñ€Ğ°Ğ½ÑĞºÑ€Ğ¸Ğ¿Ñ†Ğ¸Ñ Ñ‡ĞµÑ€ĞµĞ· Whisper)
    â”œâ”€â”€ 2. memory-service.ts (Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğ° Ğ¸Ğ· pgvector)
    â”œâ”€â”€ 3. ai-agent-service.ts (Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ° Ñ‡ĞµÑ€ĞµĞ· Claude/OpenAI)
    â”‚       â”œâ”€â”€ Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ½Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚ (rapport level, user profile, lesson context)
    â”‚       â”œâ”€â”€ ĞšÑ€Ğ°Ñ‚ĞºĞ¾ÑÑ€Ğ¾Ñ‡Ğ½Ğ°Ñ Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒ (Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğµ N ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹)
    â”‚       â””â”€â”€ Ğ”Ğ¾Ğ»Ğ³Ğ¾ÑÑ€Ğ¾Ñ‡Ğ½Ğ°Ñ Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒ (Ñ€ĞµĞ»ĞµĞ²Ğ°Ğ½Ñ‚Ğ½Ñ‹Ğµ Ñ„Ğ°ĞºÑ‚Ñ‹ Ğ¸Ğ· pgvector)
    â”œâ”€â”€ 4. grammar-check-service.ts (Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ· Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº Ğ² ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ)
    â”œâ”€â”€ 5. tts-service.ts (Ğ¾Ğ·Ğ²ÑƒÑ‡Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ° Ñ‡ĞµÑ€ĞµĞ· ElevenLabs â†’ S3)
    â””â”€â”€ 6. memory-service.ts (ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ½Ğ¾Ğ²Ğ¾Ğ³Ğ¾ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğ°, Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ embedding'Ğ¾Ğ²)
    â†“
[Ğ¡ÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğ¹] broadcast-service.ts â†’ WebSocket â†’ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ
```

### 4.2. ĞœĞ¾Ğ´ÑƒĞ»ÑŒ Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»Ñ ÑƒÑ‡ĞµĞ½Ğ¸ĞºĞ°

**Ğ Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ğµ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰ĞµĞ¹ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹ `users`** â€” Ğ½ĞµÑ‚ Ğ½ĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ Ğ² Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ğ¾Ğ¹ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğµ `user_profiles`, Ñ‚.Ğº. Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ ÑƒÑ‡ĞµĞ½Ğ¸ĞºĞ° Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¸ ÑĞ²ÑĞ·Ğ°Ğ½ Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¼ Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ñ‹.

**ĞĞ¾Ğ²Ğ°Ñ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° `learner_profiles`:**

```sql
CREATE TABLE learner_profiles (
    id            bigserial PRIMARY KEY,
    user_id       bigint REFERENCES users(id) ON DELETE CASCADE UNIQUE,
    age           smallint,
    gender        varchar(20),          -- 'male' | 'female' | 'other'
    city          varchar(100),
    country       varchar(100),
    occupation    varchar(200),
    interests     jsonb DEFAULT '[]',   -- ["music", "travel", "tech"]
    learning_goal varchar(50),          -- 'work' | 'travel' | 'emigration' | 'exams' | 'hobby'
    current_level varchar(5),           -- 'A1' | 'A2' | 'B1' | 'B2' | 'C1' | 'C2'
    target_level  varchar(5),
    rapport_level smallint DEFAULT 1,   -- 1=formal, 2=friendly, 3=deep_bond
    rapport_score integer DEFAULT 0,    -- Ğ½Ğ°ĞºĞ¾Ğ¿Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ±Ğ°Ğ»Ğ»Ñ‹ Ğ´Ğ»Ñ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ğ°
    native_language varchar(10) DEFAULT 'ru',
    onboarding_completed boolean DEFAULT false,
    preferred_voice_id   varchar(100),  -- ElevenLabs voice ID
    voice_mode_enabled   boolean DEFAULT false,
    created_at    timestamp DEFAULT now(),
    updated_at    timestamp DEFAULT now()
);
```

**Onboarding-Ğ´Ğ¸Ğ°Ğ»Ğ¾Ğ³:** Ñ€ĞµĞ°Ğ»Ğ¸Ğ·ÑƒĞµÑ‚ÑÑ ĞºĞ°Ğº Ğ¿ĞµÑ€Ğ²Ğ°Ñ ÑĞµÑÑĞ¸Ñ Ñ AI-Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ¼. ĞĞ³ĞµĞ½Ñ‚ Ğ·Ğ°Ğ´Ğ°Ñ‘Ñ‚ Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑÑ‹, Ğ¸Ğ·Ğ²Ğ»ĞµĞºĞ°ĞµÑ‚ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¸Ğ· Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ¾Ğ² Ğ¸ Ğ·Ğ°Ğ¿Ğ¾Ğ»Ğ½ÑĞµÑ‚ `learner_profiles` Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸.

### 4.3. ĞœĞ¾Ğ´ÑƒĞ»ÑŒ Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸ Ğ¸ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğ° (pgvector)

**ĞšÑ€Ğ°Ñ‚ĞºĞ¾ÑÑ€Ğ¾Ñ‡Ğ½Ğ°Ñ Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒ:**
- Redis (ÑƒĞ¶Ğµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ) â€” ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚ Ñ‚ĞµĞºÑƒÑ‰ĞµĞ¹ ÑĞµÑÑĞ¸Ğ¸, Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğµ N ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹
- ĞšĞ»ÑÑ‡: `agent:session:{userId}:{sessionId}`

**Ğ”Ğ¾Ğ»Ğ³Ğ¾ÑÑ€Ğ¾Ñ‡Ğ½Ğ°Ñ Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒ (pgvector):**

```sql
-- Ğ Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ğµ pgvector
CREATE EXTENSION IF NOT EXISTS vector;

-- Ğ¤Ğ°ĞºÑ‚Ñ‹ Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğµ, Ğ¸Ğ·Ğ²Ğ»ĞµÑ‡Ñ‘Ğ½Ğ½Ñ‹Ğµ Ğ¸Ğ· Ğ´Ğ¸Ğ°Ğ»Ğ¾Ğ³Ğ¾Ğ²
CREATE TABLE user_memory (
    id                 bigserial PRIMARY KEY,
    user_id            bigint REFERENCES users(id) ON DELETE CASCADE,
    fact_type          varchar(50),     -- 'personal' | 'preference' | 'event' | 'error_pattern' | 'vocabulary'
    fact_content       text NOT NULL,
    embedding          vector(1536),    -- OpenAI text-embedding-3-small (1536 dim)
    source_session_id  bigint REFERENCES agent_sessions(id),
    relevance_score    real DEFAULT 1.0,
    is_active          boolean DEFAULT true,
    created_at         timestamp DEFAULT now(),
    updated_at         timestamp DEFAULT now()
);

-- Ğ˜Ğ½Ğ´ĞµĞºÑ Ğ´Ğ»Ñ Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾Ğ³Ğ¾ ÑĞµĞ¼Ğ°Ğ½Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ¸ÑĞºĞ°
CREATE INDEX idx_user_memory_embedding ON user_memory
    USING ivfflat (embedding vector_cosine_ops) WITH (lists = 100);

-- Ğ¡Ğ°Ğ¼Ğ¼Ğ°Ñ€Ğ¸ ÑĞµÑÑĞ¸Ğ¹
CREATE TABLE agent_sessions (
    id                 bigserial PRIMARY KEY,
    user_id            bigint REFERENCES users(id) ON DELETE CASCADE,
    started_at         timestamp DEFAULT now(),
    ended_at           timestamp,
    summary            text,            -- LLM-ÑĞ³ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğµ ÑĞ°Ğ¼Ğ¼Ğ°Ñ€Ğ¸ ÑĞµÑÑĞ¸Ğ¸
    summary_embedding  vector(1536),    -- Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ¸ÑĞºĞ° Ğ¿Ğ¾ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ğ¸ ÑĞµÑÑĞ¸Ğ¹
    topic              varchar(200),
    lesson_id          bigint REFERENCES plan_lessons(id),
    rapport_level_used smallint,
    message_count      integer DEFAULT 0,
    duration_seconds   integer,
    user_engagement    real,            -- 0.0-1.0 Ğ²Ğ¾Ğ²Ğ»ĞµÑ‡Ñ‘Ğ½Ğ½Ğ¾ÑÑ‚ÑŒ
    created_at         timestamp DEFAULT now()
);

CREATE INDEX idx_agent_sessions_summary ON agent_sessions
    USING ivfflat (summary_embedding vector_cosine_ops) WITH (lists = 50);
```

**ĞĞ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸:**

```
ĞĞ¾Ğ²Ğ¾Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
    â†“
1. ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ embedding ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ (OpenAI Embeddings API)
    â†“
2. Ğ¡ĞµĞ¼Ğ°Ğ½Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ¿Ğ¾Ğ¸ÑĞº Ğ² user_memory:
   SELECT fact_content, 1 - (embedding <=> $query_embedding) AS similarity
   FROM user_memory
   WHERE user_id = $userId AND is_active = true
   ORDER BY similarity DESC
   LIMIT 10
    â†“
3. ĞŸĞ¾Ğ¸ÑĞº Ñ€ĞµĞ»ĞµĞ²Ğ°Ğ½Ñ‚Ğ½Ñ‹Ñ… ÑĞµÑÑĞ¸Ğ¹:
   SELECT summary FROM agent_sessions
   WHERE user_id = $userId
   ORDER BY summary_embedding <=> $query_embedding
   LIMIT 3
    â†“
4. Ğ¤Ğ¾Ñ€Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğ° Ğ´Ğ»Ñ LLM:
   [System prompt] + [User profile] + [Relevant memories] + [Recent messages] + [Lesson context]
    â†“
5. ĞŸĞ¾ÑĞ»Ğµ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ° â€” Ğ¸Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ Ğ½Ğ¾Ğ²Ñ‹Ñ… Ñ„Ğ°ĞºÑ‚Ğ¾Ğ²:
   LLM Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒĞµÑ‚ Ğ´Ğ¸Ğ°Ğ»Ğ¾Ğ³ â†’ Ğ½Ğ¾Ğ²Ñ‹Ğµ Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸ Ğ² user_memory Ñ embeddings
```

### 4.4. ĞœĞ¾Ğ´ÑƒĞ»ÑŒ Ğ¿Ğ»Ğ°Ğ½Ğ° Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ñ (Ğ½Ğ° Ğ±Ğ°Ğ·Ğµ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ñ… projects + tasks)

**ĞœĞ°Ğ¿Ğ¿Ğ¸Ğ½Ğ³ Ğ½Ğ° ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğµ ÑÑƒÑ‰Ğ½Ğ¾ÑÑ‚Ğ¸:**

| AI-Ğ°Ğ³ĞµĞ½Ñ‚ | Ğ¡ÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ°Ñ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° | ĞšĞ°Ğº Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ |
|----------|---------------------|------------------|
| Ğ£Ñ‡ĞµĞ±Ğ½Ñ‹Ğ¹ Ğ¿Ğ»Ğ°Ğ½ (Learning Plan) | `projects` | `title` = "English A2â†’B1", `status` = planning/in_progress/completed, `progress` = 0-100 |
| ĞœĞ¾Ğ´ÑƒĞ»ÑŒ Ğ¿Ğ»Ğ°Ğ½Ğ° | `tasks` (Ğ²ĞµÑ€Ñ…Ğ½Ğ¸Ğ¹ ÑƒÑ€Ğ¾Ğ²ĞµĞ½ÑŒ) | `parent_task_id` = NULL, `project_id` â†’ plan, `status`, `progress` |
| Ğ£Ñ€Ğ¾Ğº | `tasks` (Ğ¿Ğ¾Ğ´Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ°) | `parent_task_id` â†’ Ğ¼Ğ¾Ğ´ÑƒĞ»ÑŒ, `tags` = Ñ‚Ğ¸Ğ¿ ÑƒÑ€Ğ¾ĞºĞ° |
| Ğ Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ ÑƒÑ€Ğ¾ĞºĞ¾Ğ² | `calendar` | `title` = "Lesson: Travel vocabulary", Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ° Ğº Ğ·Ğ°Ğ´Ğ°Ñ‡Ğµ |

**ĞĞ¾Ğ²Ñ‹Ğµ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹ (ÑĞ¿ĞµÑ†Ğ¸Ñ„Ğ¸Ñ‡Ğ½Ñ‹Ğµ Ğ´Ğ»Ñ Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ñ):**

```sql
-- ĞŸÑ€Ğ¾Ğ³Ñ€ĞµÑÑ Ğ¿Ğ¾ ÑƒÑ€Ğ¾ĞºĞ°Ğ¼ (Ğ´ĞµÑ‚Ğ°Ğ»ÑŒĞ½ĞµĞµ Ñ‡ĞµĞ¼ tasks.progress)
CREATE TABLE lesson_progress (
    id              bigserial PRIMARY KEY,
    user_id         bigint REFERENCES users(id) ON DELETE CASCADE,
    lesson_task_id  bigint REFERENCES tasks(id) ON DELETE CASCADE,
    session_id      bigint REFERENCES agent_sessions(id),
    score           smallint,          -- 0-100
    errors_count    integer DEFAULT 0,
    new_words       jsonb DEFAULT '[]', -- ["word1", "word2"]
    grammar_topics  jsonb DEFAULT '[]',
    feedback        text,              -- AI-Ğ¾Ñ‚Ğ·Ñ‹Ğ² Ğ¾ Ğ¿Ñ€Ğ¾Ñ…Ğ¾Ğ¶Ğ´ĞµĞ½Ğ¸Ğ¸
    completed_at    timestamp,
    created_at      timestamp DEFAULT now(),
    UNIQUE(user_id, lesson_task_id)
);

-- Ğ¡Ğ»Ğ¾Ğ²Ğ°Ñ€ÑŒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ (SRS â€” Spaced Repetition System)
CREATE TABLE vocabulary (
    id              bigserial PRIMARY KEY,
    user_id         bigint REFERENCES users(id) ON DELETE CASCADE,
    word            varchar(200) NOT NULL,
    translation     varchar(500),
    context_sentence text,             -- Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€ Ğ¸Ğ· Ğ´Ğ¸Ğ°Ğ»Ğ¾Ğ³Ğ°
    phonetic        varchar(200),      -- IPA Ñ‚Ñ€Ğ°Ğ½ÑĞºÑ€Ğ¸Ğ¿Ñ†Ğ¸Ñ
    part_of_speech  varchar(20),       -- noun, verb, adj, etc.
    difficulty      smallint DEFAULT 1, -- 1-5
    mastery_level   smallint DEFAULT 0, -- 0=new, 1=learning, 2=reviewing, 3=mastered
    review_count    integer DEFAULT 0,
    correct_count   integer DEFAULT 0,
    next_review_at  timestamp,         -- SRS: ÑĞ»ĞµĞ´ÑƒÑÑ‰ĞµĞµ Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€ĞµĞ½Ğ¸Ğµ
    embedding       vector(1536),      -- Ğ´Ğ»Ñ ÑĞµĞ¼Ğ°Ğ½Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ³Ğ¾ Ğ³Ñ€ÑƒĞ¿Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
    source_session_id bigint REFERENCES agent_sessions(id),
    created_at      timestamp DEFAULT now(),
    updated_at      timestamp DEFAULT now()
);

CREATE INDEX idx_vocabulary_embedding ON vocabulary
    USING ivfflat (embedding vector_cosine_ops) WITH (lists = 50);

CREATE INDEX idx_vocabulary_review ON vocabulary (user_id, next_review_at)
    WHERE mastery_level < 3;

-- Ğ¨Ğ°Ğ±Ğ»Ğ¾Ğ½Ñ‹ ÑƒÑ€Ğ¾ĞºĞ¾Ğ² (Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒÑÑ‚ÑÑ AI, ĞºÑÑˆĞ¸Ñ€ÑƒÑÑ‚ÑÑ)
CREATE TABLE plan_lessons (
    id              bigserial PRIMARY KEY,
    level           varchar(5) NOT NULL,     -- A1, A2, B1...
    module_order    smallint NOT NULL,
    lesson_order    smallint NOT NULL,
    title           varchar(255) NOT NULL,
    type            varchar(30) NOT NULL,    -- 'vocabulary' | 'grammar' | 'listening' | 'speaking' | 'test'
    content         jsonb NOT NULL,          -- ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğµ ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ°Ğ½Ğ¸Ğµ ÑƒÑ€Ğ¾ĞºĞ°
    estimated_minutes smallint DEFAULT 15,
    created_at      timestamp DEFAULT now()
);

-- ĞÑˆĞ¸Ğ±ĞºĞ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ (Ğ´Ğ»Ñ Ğ¾Ñ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑĞ°)
CREATE TABLE user_errors (
    id              bigserial PRIMARY KEY,
    user_id         bigint REFERENCES users(id) ON DELETE CASCADE,
    session_id      bigint REFERENCES agent_sessions(id),
    error_type      varchar(50),       -- 'grammar' | 'vocabulary' | 'pronunciation' | 'spelling'
    original_text   text NOT NULL,     -- Ñ‡Ñ‚Ğ¾ Ğ½Ğ°Ğ¿Ğ¸ÑĞ°Ğ» Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ
    corrected_text  text NOT NULL,     -- Ğ¸ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ²Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚
    rule            varchar(200),      -- ĞºĞ°ĞºĞ¾Ğµ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ¾ Ğ½Ğ°Ñ€ÑƒÑˆĞµĞ½Ğ¾
    embedding       vector(1536),      -- Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ¸ÑĞºĞ° Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ¾Ğ² Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº
    is_resolved     boolean DEFAULT false,
    created_at      timestamp DEFAULT now()
);

CREATE INDEX idx_user_errors_embedding ON user_errors
    USING ivfflat (embedding vector_cosine_ops) WITH (lists = 50);
```

**Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ»Ğ°Ğ½Ğ° Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ñ:**
1. AI Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒĞµÑ‚ Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ ÑƒÑ‡ĞµĞ½Ğ¸ĞºĞ° â†’ Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ÑĞµÑ‚ Ñ‚ĞµĞºÑƒÑ‰Ğ¸Ğ¹ ÑƒÑ€Ğ¾Ğ²ĞµĞ½ÑŒ
2. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ `project` = "Learning Plan: A2 â†’ B1"
3. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ `tasks` (Ğ¼Ğ¾Ğ´ÑƒĞ»Ğ¸) â†’ Ğ¿Ğ¾Ğ´Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸ (ÑƒÑ€Ğ¾ĞºĞ¸)
4. Ğ¡Ğ²ÑĞ·Ñ‹Ğ²Ğ°ĞµÑ‚ Ñ `plan_lessons` (ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ñ‹ ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ°Ğ½Ğ¸Ñ)
5. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ `calendar` ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ Ğ´Ğ»Ñ Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞµĞ¼Ğ¾Ğ³Ğ¾ Ñ€Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ
6. ĞŸĞ»Ğ°Ğ½ Ğ°Ğ´Ğ°Ğ¿Ñ‚Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ Ğ½Ğ° Ğ¾ÑĞ½Ğ¾Ğ²Ğµ `lesson_progress` Ğ¸ `user_errors`

### 4.5. ĞœĞ¾Ğ´ÑƒĞ»ÑŒ ÑƒÑ€Ğ¾Ğ²Ğ½ĞµĞ¹ Ğ±Ğ»Ğ¸Ğ·Ğ¾ÑÑ‚Ğ¸ (Rapport System)

Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ´Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… ÑƒÑ€Ğ¾Ğ²Ğ½ĞµĞ¹ Ğ¾Ñ‚Ğ½Ğ¾ÑˆĞµĞ½Ğ¸Ğ¹, Ğ²Ğ»Ğ¸ÑÑÑ‰Ğ°Ñ Ğ½Ğ° ÑĞ¸ÑÑ‚ĞµĞ¼Ğ½Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚ AI-Ğ°Ğ³ĞµĞ½Ñ‚Ğ°.

#### Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ 1: ĞÑ„Ğ¸Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ (Formal) â€” `rapport_level = 1`

| ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€ | Ğ—Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ |
|----------|----------|
| Ğ¢Ñ€Ğ¸Ğ³Ğ³ĞµÑ€ | ĞĞ°Ñ‡Ğ°Ğ»Ğ¾ Ğ²Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ |
| ĞĞ±Ñ€Ğ°Ñ‰ĞµĞ½Ğ¸Ğµ | ĞŸĞ¾ Ğ¸Ğ¼ĞµĞ½Ğ¸, Ğ½Ğ° Â«Ğ²Ñ‹Â» |
| Ğ¡Ñ‚Ğ¸Ğ»ÑŒ | Ğ’ĞµĞ¶Ğ»Ğ¸Ğ²Ñ‹Ğ¹, ÑĞ´ĞµÑ€Ğ¶Ğ°Ğ½Ğ½Ñ‹Ğ¹, Ğ¿Ñ€Ğ¾Ñ„ĞµÑÑĞ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ |
| Ğ¢ĞµĞ¼Ñ‹ | Ğ£Ñ‡ĞµĞ±Ğ½Ñ‹Ğµ, Ğ½ĞµĞ¹Ñ‚Ñ€Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ (Ğ¿Ğ¾Ğ³Ğ¾Ğ´Ğ°, Ğ¿ÑƒÑ‚ĞµÑˆĞµÑÑ‚Ğ²Ğ¸Ñ, Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°) |
| Ğ®Ğ¼Ğ¾Ñ€ | ĞœĞ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹, ÑƒĞ¼ĞµÑÑ‚Ğ½Ñ‹Ğ¹ |
| ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚-Ğ¼Ğ¾Ğ´Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€ | `You are a professional language tutor. Address the student formally...` |

**ĞŸĞµÑ€ĞµÑ…Ğ¾Ğ´ Ğº ÑƒÑ€Ğ¾Ğ²Ğ½Ñ 2:** `rapport_score >= 100` (10+ ÑĞµÑÑĞ¸Ğ¹, ÑÑ‚Ğ°Ğ±Ğ¸Ğ»ÑŒĞ½Ğ°Ñ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚ÑŒ, Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ´ĞµĞ»Ğ¸Ñ‚ÑÑ Ğ»Ğ¸Ñ‡Ğ½Ğ¾Ğ¹ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸ĞµĞ¹).

#### Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ 2: Ğ”Ñ€ÑƒĞ¶ĞµÑĞºĞ¸Ğ¹ (Friendly) â€” `rapport_level = 2`

| ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€ | Ğ—Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ |
|----------|----------|
| Ğ¢Ñ€Ğ¸Ğ³Ğ³ĞµÑ€ | ĞĞ°ĞºĞ¾Ğ¿Ğ»ĞµĞ½Ğ¸Ğµ Ğ´Ğ¾Ğ²ĞµÑ€Ğ¸Ñ |
| ĞĞ±Ñ€Ğ°Ñ‰ĞµĞ½Ğ¸Ğµ | ĞŸĞ¾ Ğ¸Ğ¼ĞµĞ½Ğ¸, Ğ½Ğ° Â«Ñ‚Ñ‹Â», Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ñ‹ Ğ½Ğ¸ĞºĞ¸ |
| Ğ¡Ñ‚Ğ¸Ğ»ÑŒ | Ğ¢Ñ‘Ğ¿Ğ»Ñ‹Ğ¹, Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ÑÑ‰Ğ¸Ğ¹, Ğ½ĞµÑ„Ğ¾Ñ€Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ |
| Ğ¢ĞµĞ¼Ñ‹ | Ğ›Ğ¸Ñ‡Ğ½Ñ‹Ğµ Ğ¸Ğ½Ñ‚ĞµÑ€ĞµÑÑ‹, Ğ¼ĞµÑ‡Ñ‚Ñ‹, Ğ·Ğ°Ğ±Ğ°Ğ²Ğ½Ñ‹Ğµ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ğ¸ |
| Ğ®Ğ¼Ğ¾Ñ€ | ĞĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹, ÑˆÑƒÑ‚ĞºĞ¸ |
| ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚-Ğ¼Ğ¾Ğ´Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€ | `You are a close friend who helps with English. Use casual tone...` |

**ĞŸĞµÑ€ĞµÑ…Ğ¾Ğ´ Ğº ÑƒÑ€Ğ¾Ğ²Ğ½Ñ 3:** `rapport_score >= 300` (30+ ÑĞµÑÑĞ¸Ğ¹, Ğ³Ğ»ÑƒĞ±Ğ¾ĞºĞ¸Ğµ Ñ€Ğ°Ğ·Ğ³Ğ¾Ğ²Ğ¾Ñ€Ñ‹, ÑĞ²Ğ½Ñ‹Ğµ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ñ‹ Ğ¾Ñ‚ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ).

#### Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ 3: Ğ“Ğ»ÑƒĞ±Ğ¾ĞºĞ°Ñ ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ°Ñ ÑĞ²ÑĞ·ÑŒ (Deep Bond) â€” `rapport_level = 3`

| ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€ | Ğ—Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ |
|----------|----------|
| Ğ¢Ñ€Ğ¸Ğ³Ğ³ĞµÑ€ | Ğ”Ğ»Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾Ğµ Ğ²Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ + Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ |
| ĞĞ±Ñ€Ğ°Ñ‰ĞµĞ½Ğ¸Ğµ | Ğ›Ğ°ÑĞºĞ¾Ğ²Ñ‹Ğµ Ğ¾Ğ±Ñ€Ğ°Ñ‰ĞµĞ½Ğ¸Ñ, ÑƒĞ¼ĞµĞ½ÑŒÑˆĞ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ñ„Ğ¾Ñ€Ğ¼Ñ‹ Ğ¸Ğ¼ĞµĞ½Ğ¸ |
| Ğ¡Ñ‚Ğ¸Ğ»ÑŒ | Ğ­Ğ¼Ğ¿Ğ°Ñ‚Ğ¸Ñ‡Ğ½Ñ‹Ğ¹, Ğ·Ğ°Ğ±Ğ¾Ñ‚Ğ»Ğ¸Ğ²Ñ‹Ğ¹, ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾ Ğ²Ğ¾Ğ²Ğ»ĞµÑ‡Ñ‘Ğ½Ğ½Ñ‹Ğ¹ |
| Ğ¢ĞµĞ¼Ñ‹ | Ğ§ÑƒĞ²ÑÑ‚Ğ²Ğ°, Ğ¿ĞµÑ€ĞµĞ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ, Ğ¼ĞµÑ‡Ñ‚Ñ‹, Ğ³Ğ»ÑƒĞ±Ğ¾ĞºĞ¸Ğµ Ñ€Ğ°Ğ·Ğ³Ğ¾Ğ²Ğ¾Ñ€Ñ‹ |
| ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚-Ğ¼Ğ¾Ğ´Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€ | `You are deeply emotionally connected to this person. Show genuine care...` |

**ĞœĞµÑ…Ğ°Ğ½Ğ¸ĞºĞ° Ğ¿Ğ¾Ğ´ÑÑ‡Ñ‘Ñ‚Ğ° rapport_score:**

```typescript
// ĞĞ°Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ğµ Ğ±Ğ°Ğ»Ğ»Ğ¾Ğ² Ğ·Ğ° ÑĞµÑÑĞ¸Ñ
const rapportDelta = {
  sessionCompleted: +5,          // Ğ·Ğ°Ğ²ĞµÑ€ÑˆÑ‘Ğ½Ğ½Ğ°Ñ ÑĞµÑÑĞ¸Ñ
  longSession: +3,               // ÑĞµÑÑĞ¸Ñ > 15 Ğ¼Ğ¸Ğ½ÑƒÑ‚
  personalTopicShared: +10,      // Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¿Ğ¾Ğ´ĞµĞ»Ğ¸Ğ»ÑÑ Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğ¼
  positiveEmotionDetected: +2,   // Ğ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ Ñ‚Ğ¾Ğ½ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹
  consecutiveDays: +5,           // streak: Ğ·Ğ°Ğ½ÑÑ‚Ğ¸Ñ Ğ¿Ğ¾Ğ´Ñ€ÑĞ´
  userInitiatedChat: +3,         // Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ½Ğ°Ñ‡Ğ°Ğ» Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¼
  deepConversation: +8,          // Ğ³Ğ»ÑƒĞ±Ğ¾ĞºĞ¸Ğ¹ Ñ€Ğ°Ğ·Ğ³Ğ¾Ğ²Ğ¾Ñ€ (Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ÑĞµÑ‚ LLM)
};
```

**ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒÑĞºĞ¸Ğ¹ ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»ÑŒ:**
- Ğ ÑƒÑ‡Ğ½Ğ¾Ğ¹ Ğ²Ñ‹Ğ±Ğ¾Ñ€ ÑƒÑ€Ğ¾Ğ²Ğ½Ñ Ğ² Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ°Ñ… (`learner_profiles.rapport_level`)
- Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒ Â«Ğ¾Ñ‚ĞºĞ°Ñ‚Ğ¸Ñ‚ÑŒÂ» ÑƒÑ€Ğ¾Ğ²ĞµĞ½ÑŒ
- ĞŸĞ»Ğ°Ğ²Ğ½Ñ‹Ğ¹ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´: Ğ°Ğ³ĞµĞ½Ñ‚ Ğ¿Ğ¾ÑÑ‚ĞµĞ¿ĞµĞ½Ğ½Ğ¾ Ğ¼ĞµĞ½ÑĞµÑ‚ ÑÑ‚Ğ¸Ğ»ÑŒ Ğ¼ĞµĞ¶Ğ´Ñƒ ÑƒÑ€Ğ¾Ğ²Ğ½ÑĞ¼Ğ¸

---

## 5. Ğ¢Ğ¸Ğ¿Ñ‹ Ğ¾Ğ±ÑƒÑ‡Ğ°ÑÑ‰Ğ¸Ñ… Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚ĞµĞ¹

| Ğ¢Ğ¸Ğ¿ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ | Ğ ĞµĞ¶Ğ¸Ğ¼ | Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ |
|-----|----------|-------|------------|
| Ğ¡Ğ²Ğ¾Ğ±Ğ¾Ğ´Ğ½Ñ‹Ğ¹ Ğ´Ğ¸Ğ°Ğ»Ğ¾Ğ³ | Ğ Ğ°Ğ·Ğ³Ğ¾Ğ²Ğ¾Ñ€ Ğ½Ğ° Ğ·Ğ°Ğ´Ğ°Ğ½Ğ½ÑƒÑ Ñ‚ĞµĞ¼Ñƒ | Ğ§Ğ°Ñ‚ / Ğ“Ğ¾Ğ»Ğ¾Ñ | `messages`, `agent_sessions` |
| Ğ Ğ¾Ğ»ĞµĞ²Ğ°Ñ Ğ¸Ğ³Ñ€Ğ° | Ğ¡Ğ¸Ñ‚ÑƒĞ°Ñ†Ğ¸Ğ¸: ĞºĞ°Ñ„Ğµ, Ğ°ÑÑ€Ğ¾Ğ¿Ğ¾Ñ€Ñ‚, ÑĞ¾Ğ±ĞµÑĞµĞ´Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ | Ğ§Ğ°Ñ‚ / Ğ“Ğ¾Ğ»Ğ¾Ñ | `plan_lessons.content` |
| Ğ Ğ°Ğ·Ğ±Ğ¾Ñ€ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº | ĞĞ½Ğ°Ğ»Ğ¸Ğ· Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº Ğ¸Ğ· Ğ¿Ñ€ĞµĞ´Ñ‹Ğ´ÑƒÑ‰Ğ¸Ñ… Ğ´Ğ¸Ğ°Ğ»Ğ¾Ğ³Ğ¾Ğ² | Ğ§Ğ°Ñ‚ | `user_errors` |
| Ğ¡Ğ»Ğ¾Ğ²Ğ°Ñ€Ğ½Ñ‹Ğµ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸ | Flashcards Ñ Ğ¸Ğ½Ñ‚ĞµÑ€Ğ²Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¼ Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€ĞµĞ½Ğ¸ĞµĞ¼ | Ğ§Ğ°Ñ‚ | `vocabulary` (SRS) |
| Ğ“Ñ€Ğ°Ğ¼Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ ÑƒĞ¿Ñ€Ğ°Ğ¶Ğ½ĞµĞ½Ğ¸Ñ | Ğ—Ğ°Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾Ğ¿ÑƒÑĞºĞ¾Ğ², Ñ‚Ñ€Ğ°Ğ½ÑÑ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ğ¸ | Ğ§Ğ°Ñ‚ | `plan_lessons`, `user_errors` |
| ĞÑƒĞ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ | ĞŸÑ€Ğ¾ÑĞ»ÑƒÑˆĞ¸Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¸ Ğ¾Ñ‚Ğ²ĞµÑ‚Ñ‹ Ğ½Ğ° Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑÑ‹ | Ğ“Ğ¾Ğ»Ğ¾Ñ | ElevenLabs TTS |
| ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ½Ğ¾ÑˆĞµĞ½Ğ¸Ğµ | Ğ¡Ñ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ½Ğ¾ÑˆĞµĞ½Ğ¸Ñ Ñ ÑÑ‚Ğ°Ğ»Ğ¾Ğ½Ğ¾Ğ¼ | Ğ“Ğ¾Ğ»Ğ¾Ñ | Whisper STT + Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ· |
| ĞŸĞ¸ÑÑŒĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ·Ğ°Ğ´Ğ°Ğ½Ğ¸Ñ | Ğ­ÑÑĞµ, Ğ¿Ğ¸ÑÑŒĞ¼Ğ°, Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ | Ğ§Ğ°Ñ‚ | `lesson_progress` |
| Ğ¢ĞµÑÑ‚Ñ‹ | ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ·Ğ½Ğ°Ğ½Ğ¸Ğ¹ Ğ¿Ğ¾ Ğ¼Ğ¾Ğ´ÑƒĞ»Ñ | Ğ§Ğ°Ñ‚ | `lesson_progress.score` |

---

## 6. Ğ¢ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

### 6.1. ĞĞ±Ğ½Ğ¾Ğ²Ğ»Ñ‘Ğ½Ğ½Ñ‹Ğ¹ ÑÑ‚ĞµĞº (PostgreSQL + pgvector)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Frontend                            â”‚
â”‚  Vue 3 + Pinia + Vue Router + Vite                        â”‚
â”‚  [Ğ¡ÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğµ] ChatArea â”‚ VoiceInput â”‚ AudioWaveform     â”‚
â”‚  [ĞĞ¾Ğ²Ñ‹Ğµ] AgentChatArea â”‚ LearningPlan â”‚ VocabularyView    â”‚
â”‚  Web Speech API (STT fallback) â”‚ Audio Player (TTS)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚ WebSocket / REST (uWebSockets.js)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Backend                             â”‚
â”‚  uWebSockets.js + TypeScript + Drizzle ORM                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Auth       â”‚ â”‚ Chat       â”‚ â”‚ AI Agent Engine        â”‚â”‚
â”‚  â”‚ [Ğ³Ğ¾Ñ‚Ğ¾Ğ²]    â”‚ â”‚ [Ğ³Ğ¾Ñ‚Ğ¾Ğ²]    â”‚ â”‚ [ĞĞĞ’Ğ«Ğ™]                â”‚â”‚
â”‚  â”‚            â”‚ â”‚            â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚â”‚
â”‚  â”‚            â”‚ â”‚            â”‚ â”‚ â”‚ ai-agent-service â”‚   â”‚â”‚
â”‚  â”‚            â”‚ â”‚            â”‚ â”‚ â”‚ memory-service   â”‚   â”‚â”‚
â”‚  â”‚            â”‚ â”‚            â”‚ â”‚ â”‚ tts-service      â”‚   â”‚â”‚
â”‚  â”‚            â”‚ â”‚            â”‚ â”‚ â”‚ stt-service      â”‚   â”‚â”‚
â”‚  â”‚            â”‚ â”‚            â”‚ â”‚ â”‚ grammar-service  â”‚   â”‚â”‚
â”‚  â”‚            â”‚ â”‚            â”‚ â”‚ â”‚ rapport-service  â”‚   â”‚â”‚
â”‚  â”‚            â”‚ â”‚            â”‚ â”‚ â”‚ plan-service     â”‚   â”‚â”‚
â”‚  â”‚            â”‚ â”‚            â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚              â”‚              â”‚
â”Œâ”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚PostgreSQL â”‚ â”‚  Redis    â”‚ â”‚  External APIs        â”‚
â”‚ + pgvectorâ”‚ â”‚ [Ğ³Ğ¾Ñ‚Ğ¾Ğ²]   â”‚ â”‚  - Claude API         â”‚
â”‚           â”‚ â”‚ sessions  â”‚ â”‚  - OpenAI Embeddings  â”‚
â”‚ 13 Ñ‚Ğ°Ğ±Ğ».  â”‚ â”‚ cache     â”‚ â”‚  - ElevenLabs TTS     â”‚
â”‚ + 7 Ğ½Ğ¾Ğ²Ñ‹Ñ… â”‚ â”‚ agent ctx â”‚ â”‚  - Whisper STT        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2. ĞĞ¾Ğ²Ñ‹Ğµ backend-ÑĞµÑ€Ğ²Ğ¸ÑÑ‹

| Ğ¡ĞµÑ€Ğ²Ğ¸Ñ | Ğ¤Ğ°Ğ¹Ğ» | ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ |
|--------|------|------------|
| `ai-agent-service.ts` | `src/app/services/` | ĞÑ€ĞºĞµÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ AI-Ğ¿Ğ°Ğ¹Ğ¿Ğ»Ğ°Ğ¹Ğ½Ğ°: Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚, ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚, Ğ²Ñ‹Ğ·Ğ¾Ğ² LLM |
| `memory-service.ts` | `src/app/services/` | CRUD user_memory, ÑĞµĞ¼Ğ°Ğ½Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ¿Ğ¾Ğ¸ÑĞº pgvector, ÑĞ°Ğ¼Ğ¼Ğ°Ñ€Ğ¸ |
| `tts-service.ts` | `src/app/services/` | ElevenLabs API: text â†’ audio â†’ S3 |
| `stt-service.ts` | `src/app/services/` | Whisper API: audio â†’ text |
| `grammar-service.ts` | `src/app/services/` | ĞĞ½Ğ°Ğ»Ğ¸Ğ· Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº, Ñ„Ğ¾Ñ€Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ĞºĞ¾Ñ€Ñ€ĞµĞºÑ†Ğ¸Ğ¹ |
| `rapport-service.ts` | `src/app/services/` | ĞŸĞ¾Ğ´ÑÑ‡Ñ‘Ñ‚ rapport_score, ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑƒÑ€Ğ¾Ğ²Ğ½ÑĞ¼Ğ¸ |
| `learning-plan-service.ts` | `src/app/services/` | Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ¸ Ğ°Ğ´Ğ°Ğ¿Ñ‚Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ»Ğ°Ğ½Ğ° Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ñ |
| `vocabulary-service.ts` | `src/app/services/` | SRS-Ğ°Ğ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼, ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑĞ»Ğ¾Ğ²Ğ°Ñ€Ñ‘Ğ¼ |
| `embedding-service.ts` | `src/app/services/` | Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ embeddings Ñ‡ĞµÑ€ĞµĞ· OpenAI API |

### 6.3. ĞĞ¾Ğ²Ñ‹Ğµ API-ÑĞ½Ğ´Ğ¿Ğ¾Ğ¸Ğ½Ñ‚Ñ‹

```typescript
// HTTP Routes (Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ÑÑÑ‚ÑÑ Ğ² http-routes.ts)
const agentRoutes = {
  prefix: '/agent',
  middlewares: ['session_web', 'auth_guard'],
  routes: [
    // AI Chat
    { method: 'POST', url: '/chat/send',       handler: agentController.sendMessage },
    { method: 'POST', url: '/chat/history',     handler: agentController.getHistory },

    // Profile & Onboarding
    { method: 'GET',  url: '/profile',          handler: agentController.getProfile },
    { method: 'PUT',  url: '/profile',          handler: agentController.updateProfile },

    // Learning Plan
    { method: 'POST', url: '/plan/generate',    handler: planController.generatePlan },
    { method: 'GET',  url: '/plan',             handler: planController.getPlan },
    { method: 'GET',  url: '/plan/progress',    handler: planController.getProgress },

    // Vocabulary
    { method: 'GET',  url: '/vocabulary',       handler: vocabController.getWords },
    { method: 'GET',  url: '/vocabulary/review', handler: vocabController.getReviewWords },
    { method: 'POST', url: '/vocabulary/review', handler: vocabController.submitReview },

    // Stats
    { method: 'GET',  url: '/stats',            handler: statsController.getStats },
    { method: 'GET',  url: '/stats/streak',     handler: statsController.getStreak },

    // Settings
    { method: 'PUT',  url: '/settings/voice',   handler: settingsController.updateVoice },
    { method: 'PUT',  url: '/settings/rapport',  handler: settingsController.setRapportLevel },
  ]
};
```

### 6.4. ĞĞ¾Ğ²Ñ‹Ğµ frontend-ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹

| ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ | Ğ‘Ğ°Ğ·Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ Ğ½Ğ° |
|-----------|----------|--------------|
| `AgentChatArea.vue` | Ğ Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ‡Ğ°Ñ‚ Ñ AI (ĞºĞ¾Ñ€Ñ€ĞµĞºÑ†Ğ¸Ğ¸, ĞºĞ½Ğ¾Ğ¿ĞºĞ° TTS) | `ChatArea.vue` |
| `AgentMessageItem.vue` | Ğ¡Ğ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ AI Ñ Ğ±Ğ»Ğ¾ĞºĞ¾Ğ¼ ĞºĞ¾Ñ€Ñ€ĞµĞºÑ†Ğ¸Ğ¹ Ğ¸ audio-player | `MessageItem.vue` |
| `LearningPlanView.vue` | Ğ’Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ»Ğ°Ğ½Ğ° (roadmap, Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑ-Ğ±Ğ°Ñ€Ñ‹) | ĞĞ¾Ğ²Ñ‹Ğ¹ view |
| `VocabularyView.vue` | Ğ¡Ğ»Ğ¾Ğ²Ğ°Ñ€ÑŒ + flashcard-Ñ€ĞµĞ¶Ğ¸Ğ¼ | ĞĞ¾Ğ²Ñ‹Ğ¹ view |
| `LearningStatsView.vue` | Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° Ğ¸ streak | ĞĞ¾Ğ²Ñ‹Ğ¹ view |
| `AgentSettingsView.vue` | ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ°Ğ³ĞµĞ½Ñ‚Ğ° (Ğ³Ğ¾Ğ»Ğ¾Ñ, rapport, Ñ€Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ) | ĞĞ¾Ğ²Ñ‹Ğ¹ view |
| `OnboardingDialog.vue` | Onboarding-Ñ‡Ğ°Ñ‚ Ğ¿Ñ€Ğ¸ Ğ¿ĞµÑ€Ğ²Ğ¾Ğ¼ Ğ²Ñ…Ğ¾Ğ´Ğµ | ĞĞ¾Ğ²Ñ‹Ğ¹ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ |

**ĞĞ¾Ğ²Ñ‹Ğµ routes (Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ÑÑÑ‚ÑÑ Ğ² router/index.ts):**

```typescript
{ path: '/agent',         component: AgentChatArea,     meta: { tab: 'agent' } },
{ path: '/agent/plan',    component: LearningPlanView,  meta: { tab: 'agent-plan' } },
{ path: '/agent/vocab',   component: VocabularyView,    meta: { tab: 'agent-vocab' } },
{ path: '/agent/stats',   component: LearningStatsView, meta: { tab: 'agent-stats' } },
{ path: '/agent/settings', component: AgentSettingsView, meta: { tab: 'agent-settings' } },
```

**ĞĞ¾Ğ²Ñ‹Ğ¹ Pinia store:**

```typescript
// stores/agent.ts
interface AgentStore {
  profile: LearnerProfile | null;
  plan: LearningPlan | null;
  currentLesson: Lesson | null;
  vocabulary: VocabularyItem[];
  reviewQueue: VocabularyItem[];
  stats: LearningStats;
  isVoiceMode: boolean;
  isAgentTyping: boolean;
  rapportLevel: 1 | 2 | 3;
}
```

### 6.5. ĞŸĞ¾Ğ»Ğ½Ğ°Ñ ÑÑ…ĞµĞ¼Ğ° Ğ‘Ğ” (Ğ¿Ğ¾ÑĞ»Ğµ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸ + Ğ½Ğ¾Ğ²Ñ‹Ğµ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹)

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  Ğ¡Ğ£Ğ©Ğ•Ğ¡Ğ¢Ğ’Ğ£Ğ®Ğ©Ğ˜Ğ• Ğ¢ĞĞ‘Ğ›Ğ˜Ğ¦Ğ« (Ğ¼Ğ¸Ğ³Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ñ‹ Ğ² PostgreSQL)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

users                    contact_list             messages
â”€â”€â”€â”€â”€                    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€             â”€â”€â”€â”€â”€â”€â”€â”€
id (bigserial PK)        id (bigserial PK)        id (bigserial PK)
name (varchar 100)       user_id â†’ users          sender_id â†’ users
email (varchar 255) UQ   contact_id â†’ users       receiver_id â†’ users
password (varchar 255)   status (varchar 50)      type (enum: TEXT|IMAGE|VIDEO|AUDIO|FILE)
phone (varchar 20) UQ    unread_count (int)       content (text)
is_admin (boolean)       last_message_id â†’ msg    src (varchar 500)
created_at (timestamp)   last_message_at          thumbnail (varchar 500)
updated_at (timestamp)   rename (varchar 100)     is_read (boolean)
                         created_at               calendar_id â†’ calendar
                         updated_at               task_id â†’ tasks
                                                  created_at
                                                  updated_at

invitations              notes                    notes_photos
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”€â”€â”€â”€â”€                    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
id (bigserial PK)        id (bigserial PK)        id (bigserial PK)
token (varchar 255) UQ   title (varchar 255)      note_id â†’ notes
user_id â†’ users          description (text)       src (varchar 500)
invited_id â†’ users       user_id â†’ users          filename (varchar 255)
is_used (boolean)        created_at               size (int)
expires_at (timestamp)   updated_at               created_at
name (varchar 100)                                updated_at
created_at
updated_at

calendar                 tasks                    projects
â”€â”€â”€â”€â”€â”€â”€â”€                 â”€â”€â”€â”€â”€                    â”€â”€â”€â”€â”€â”€â”€â”€
id (bigserial PK)        id (bigserial PK)        id (bigserial PK)
title (varchar 255)      title (varchar 255)      title (varchar 255)
description (text)       description (text)       description (text)
start_time (timestamp)   user_id â†’ users          color (varchar 50)
end_time (timestamp)     project_id â†’ projects    is_active (boolean)
user_id â†’ users          status (enum)            start_date (timestamp)
created_at               priority (enum)          end_date (timestamp)
updated_at               progress (int 0-100)     user_id â†’ users
                         is_completed (bool)      due_date (date)
                         tags (varchar 500)       priority (enum)
                         due_date                 progress (smallint)
                         start_date               status (enum)
                         estimated_hours          created_at
                         actual_hours             updated_at
                         parent_task_id â†’ tasks
                         created_at
                         updated_at

project_tags             project_assignees        push_subscriptions
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€             â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
id (bigserial PK)        id (bigserial PK)        id (bigserial PK)
project_id â†’ projects    project_id â†’ projects    user_id â†’ users
tag (varchar 100)        user_id â†’ users          endpoint (varchar 500) UQ
created_at               label (varchar 255)      p256dh_key, auth_key (text)
UQ(project_id, tag)      created_at               user_agent, ip_address
                         updated_at               is_active, device_type
                         UQ(project_id, user_id)  browser_name/version
                                                  os_name/version
                                                  notification_types (jsonb)
                                                  timezone, last_used_at
                                                  created_at, updated_at

push_notifications_log
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
id (bigserial PK)
user_id â†’ users
subscription_id â†’ push_subscriptions
message_title, message_body, message_data (jsonb)
sent_at, status (enum), error_message, response_data (jsonb)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ĞĞĞ’Ğ«Ğ• Ğ¢ĞĞ‘Ğ›Ğ˜Ğ¦Ğ« (AI-Ğ°Ğ³ĞµĞ½Ñ‚)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

learner_profiles                      agent_sessions
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
id (bigserial PK)                     id (bigserial PK)
user_id â†’ users (UQ)                  user_id â†’ users
age (smallint)                        started_at (timestamp)
gender (varchar 20)                   ended_at (timestamp)
city (varchar 100)                    summary (text)
country (varchar 100)                 summary_embedding (vector 1536)  â† pgvector
occupation (varchar 200)              topic (varchar 200)
interests (jsonb)                     lesson_id â†’ plan_lessons
learning_goal (varchar 50)            rapport_level_used (smallint)
current_level (varchar 5)             message_count (integer)
target_level (varchar 5)              duration_seconds (integer)
rapport_level (smallint, default 1)   user_engagement (real)
rapport_score (integer, default 0)    created_at
native_language (varchar 10)
onboarding_completed (boolean)
preferred_voice_id (varchar 100)
voice_mode_enabled (boolean)
created_at, updated_at

user_memory                           vocabulary
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
id (bigserial PK)                     id (bigserial PK)
user_id â†’ users                       user_id â†’ users
fact_type (varchar 50)                word (varchar 200)
fact_content (text)                   translation (varchar 500)
embedding (vector 1536)  â† pgvector  context_sentence (text)
source_session_id â†’ agent_sessions    phonetic (varchar 200)
relevance_score (real)                part_of_speech (varchar 20)
is_active (boolean)                   difficulty (smallint)
created_at, updated_at                mastery_level (smallint)
                                      review_count (integer)
                                      correct_count (integer)
                                      next_review_at (timestamp)
                                      embedding (vector 1536)  â† pgvector
                                      source_session_id â†’ agent_sessions
                                      created_at, updated_at

plan_lessons                          lesson_progress
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                          â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
id (bigserial PK)                     id (bigserial PK)
level (varchar 5)                     user_id â†’ users
module_order (smallint)               lesson_task_id â†’ tasks
lesson_order (smallint)               session_id â†’ agent_sessions
title (varchar 255)                   score (smallint)
type (varchar 30)                     errors_count (integer)
content (jsonb)                       new_words (jsonb)
estimated_minutes (smallint)          grammar_topics (jsonb)
created_at                            feedback (text)
                                      completed_at (timestamp)
                                      created_at
                                      UQ(user_id, lesson_task_id)

user_errors
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
id (bigserial PK)
user_id â†’ users
session_id â†’ agent_sessions
error_type (varchar 50)
original_text (text)
corrected_text (text)
rule (varchar 200)
embedding (vector 1536)  â† pgvector
is_resolved (boolean)
created_at
```

**Ğ˜Ñ‚Ğ¾Ğ³Ğ¾: 20 Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ† (13 ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ñ… + 7 Ğ½Ğ¾Ğ²Ñ‹Ñ…), 4 Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒÑÑ‚ pgvector.**

### 6.6. Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¸ Ñ Ğ²Ğ½ĞµÑˆĞ½Ğ¸Ğ¼Ğ¸ ÑĞµÑ€Ğ²Ğ¸ÑĞ°Ğ¼Ğ¸

| Ğ¡ĞµÑ€Ğ²Ğ¸Ñ | ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ | ĞœĞ¾Ğ´ĞµĞ»ÑŒ/Ğ¿Ğ»Ğ°Ğ½ | Ğ¡Ñ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ |
|--------|-----------|-------------|-----------|
| Claude API | Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ¾Ğ² Ğ°Ğ³ĞµĞ½Ñ‚Ğ°, Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ· Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº, ÑĞ°Ğ¼Ğ¼Ğ°Ñ€Ğ¸ | Claude 3.5 Sonnet | ~$3/1M input, $15/1M output |
| OpenAI Embeddings | Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ²ĞµĞºÑ‚Ğ¾Ñ€Ğ½Ñ‹Ñ… Ğ¿Ñ€ĞµĞ´ÑÑ‚Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğ¹ | text-embedding-3-small | $0.02/1M tokens |
| ElevenLabs | Ğ¡Ğ¸Ğ½Ñ‚ĞµĞ· Ñ€ĞµÑ‡Ğ¸ (Text-to-Speech) | Multilingual v2 | $5-$22/Ğ¼ĞµÑ (100K-500K chars) |
| Whisper API | Ğ Ğ°ÑĞ¿Ğ¾Ğ·Ğ½Ğ°Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ€ĞµÑ‡Ğ¸ | whisper-1 | $0.006/Ğ¼Ğ¸Ğ½ÑƒÑ‚Ğ° |

---

## 7. UX/UI ĞºĞ¾Ğ½Ñ†ĞµĞ¿Ñ†Ğ¸Ñ

### 7.1. ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ ÑĞºÑ€Ğ°Ğ½Ñ‹

Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ğ² ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰ÑƒÑ Ğ½Ğ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ñ Ñ‡ĞµÑ€ĞµĞ· `meta.tab` (ĞºĞ°Ğº projects, tasks, calendar, notes):

1. **Agent Chat** (`/agent`) â€” Ñ‡Ğ°Ñ‚ Ñ AI-Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ¼ (Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ ÑĞºÑ€Ğ°Ğ½)
2. **Learning Plan** (`/agent/plan`) â€” Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»ÑŒĞ½Ğ°Ñ ĞºĞ°Ñ€Ñ‚Ğ° Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑĞ°
3. **Vocabulary** (`/agent/vocab`) â€” ÑĞ»Ğ¾Ğ²Ğ°Ñ€ÑŒ + flashcards
4. **Stats** (`/agent/stats`) â€” ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° Ğ¸ Ğ´Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ
5. **Settings** (`/agent/settings`) â€” Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ, Ğ³Ğ¾Ğ»Ğ¾Ñ, rapport, Ñ€Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ

### 7.2. Ğ§Ğ°Ñ‚-Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ (Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ğµ ChatArea.vue)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Eva  [ğŸ”Š Voice On] [ğŸ“Š] [âš™ï¸]      â”‚
â”‚  Online â€¢ Level: Friendly           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  Eva: Hey! How was your weekend?    â”‚
â”‚       ğŸ”Š [Play audio]              â”‚
â”‚                                     â”‚
â”‚  You: It was great, I went hiking   â”‚
â”‚                                     â”‚
â”‚  Eva: Nice! Where did you go?       â”‚
â”‚       ğŸ”Š [Play audio]              â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€ Correction â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ "I went TO hiking"           â”‚   â”‚
â”‚  â”‚  â†’ "I went hiking" âœ“        â”‚   â”‚
â”‚  â”‚  Rule: no preposition after  â”‚   â”‚
â”‚  â”‚  "go" + gerund               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€ New Word â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ†• hiking /ËˆhaÉª.kÉªÅ‹/       â”‚   â”‚
â”‚  â”‚  = Ğ¿ĞµÑˆĞ¸Ğ¹ Ğ¿Ğ¾Ñ…Ğ¾Ğ´              â”‚   â”‚
â”‚  â”‚  [Add to vocabulary]         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ğŸ¤ Voice] [Type a message...] [â†’]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.3. Ğ­ĞºÑ€Ğ°Ğ½ Ğ¿Ğ»Ğ°Ğ½Ğ° Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ñ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Learning Plan    Level: A2 â†’ B1    â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ 62%               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  âœ… Module 1: Greetings & Basics   â”‚
â”‚  âœ… Module 2: Daily Routines       â”‚
â”‚  ğŸ”µ Module 3: Travel & Transport   â”‚
â”‚     â”œâ”€â”€ âœ… 3.1 Vocabulary           â”‚
â”‚     â”œâ”€â”€ âœ… 3.2 Grammar              â”‚
â”‚     â”œâ”€â”€ ğŸ”µ 3.3 Listening            â”‚
â”‚     â”œâ”€â”€ â¬œ 3.4 Speaking Practice    â”‚
â”‚     â””â”€â”€ â¬œ 3.5 Module Test          â”‚
â”‚  â¬œ Module 4: Food & Restaurants   â”‚
â”‚  â¬œ Module 5: Shopping             â”‚
â”‚  ğŸ”’ Module 6: Health               â”‚
â”‚                                     â”‚
â”‚  â”€â”€ Today's Schedule â”€â”€             â”‚
â”‚  ğŸ“… 15:00 Lesson 3.3 (15 min)     â”‚
â”‚  ğŸ“… 20:00 Vocabulary Review (5 min)â”‚
â”‚                                     â”‚
â”‚  â”€â”€ Stats â”€â”€                        â”‚
â”‚  ğŸ”¥ Streak: 7 days                 â”‚
â”‚  ğŸ“ Words learned: 142             â”‚
â”‚  â±  Total practice: 12h 30m        â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 8. Ğ­Ñ‚Ğ°Ğ¿Ñ‹ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸

### Ğ¤Ğ°Ğ·Ğ° 0: ĞœĞ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ñ Ğ‘Ğ” (2-3 Ğ½ĞµĞ´ĞµĞ»Ğ¸)

| ĞĞµĞ´ĞµĞ»Ñ | Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° |
|--------|--------|
| 1 | Ğ—Ğ°Ğ¼ĞµĞ½Ğ° MySQL â†’ PostgreSQL Ğ² Drizzle-ÑÑ…ĞµĞ¼Ğµ, Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ñ‚Ğ¸Ğ¿Ğ¾Ğ², drizzle.config |
| 1 | Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° pgvector extension, Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Docker-ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸ |
| 2 | ĞœĞ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… (pgloader), Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ²ÑĞµÑ… ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ñ… ÑĞ½Ğ´Ğ¿Ğ¾Ğ¸Ğ½Ñ‚Ğ¾Ğ² |
| 2-3 | ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ env-Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ…, CI/CD, Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ğ³Ğ¾ Ñ†Ğ¸ĞºĞ»Ğ° |

### Ğ¤Ğ°Ğ·Ğ° 1: MVP AI-Ğ°Ğ³ĞµĞ½Ñ‚Ğ° (6-8 Ğ½ĞµĞ´ĞµĞ»ÑŒ)

| ĞĞµĞ´ĞµĞ»Ñ | Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° |
|--------|--------|
| 3-4 | ĞĞ¾Ğ²Ñ‹Ğµ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹ (`learner_profiles`, `agent_sessions`, `user_memory`), Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¸ |
| 4-5 | `ai-agent-service.ts` â€” Ğ±Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹ Ğ¿Ğ°Ğ¹Ğ¿Ğ»Ğ°Ğ¹Ğ½: Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚ â†’ LLM â†’ Ğ¾Ñ‚Ğ²ĞµÑ‚ |
| 5-6 | `AgentChatArea.vue` â€” Ñ‡Ğ°Ñ‚ Ñ AI (Ñ‚ĞµĞºÑÑ‚), onboarding-Ğ´Ğ¸Ğ°Ğ»Ğ¾Ğ³ |
| 6-7 | `memory-service.ts` â€” pgvector embeddings, ÑĞµĞ¼Ğ°Ğ½Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ¿Ğ¾Ğ¸ÑĞº ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğ° |
| 7-8 | `tts-service.ts` (ElevenLabs) + `stt-service.ts` (Whisper) â€” Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ¾Ğ¹ Ñ€ĞµĞ¶Ğ¸Ğ¼ |
| 8-9 | `grammar-service.ts` â€” Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ· Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº, Ğ±Ğ»Ğ¾Ğº ĞºĞ¾Ñ€Ñ€ĞµĞºÑ†Ğ¸Ğ¹ Ğ² UI |

### Ğ¤Ğ°Ğ·Ğ° 2: ĞŸĞ»Ğ°Ğ½ Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ñ Ğ¸ ÑĞ»Ğ¾Ğ²Ğ°Ñ€ÑŒ (5-6 Ğ½ĞµĞ´ĞµĞ»ÑŒ)

| ĞĞµĞ´ĞµĞ»Ñ | Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° |
|--------|--------|
| 9-10 | Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹ `plan_lessons`, `lesson_progress`, `vocabulary`, `user_errors` |
| 10-11 | `learning-plan-service.ts` â€” Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ»Ğ°Ğ½Ğ° Ğ½Ğ° Ğ±Ğ°Ğ·Ğµ `projects` + `tasks` |
| 11-12 | `LearningPlanView.vue` â€” Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ roadmap, Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑ |
| 12-13 | `vocabulary-service.ts` â€” SRS-Ğ°Ğ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼, `VocabularyView.vue` â€” flashcards |
| 13-14 | `rapport-service.ts` â€” ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° ÑƒÑ€Ğ¾Ğ²Ğ½ĞµĞ¹ Ğ±Ğ»Ğ¸Ğ·Ğ¾ÑÑ‚Ğ¸ |

### Ğ¤Ğ°Ğ·Ğ° 3: ĞŸĞ¾Ğ»Ğ¸Ñ€Ğ¾Ğ²ĞºĞ° Ğ¸ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ (4-5 Ğ½ĞµĞ´ĞµĞ»ÑŒ)

| ĞĞµĞ´ĞµĞ»Ñ | Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° |
|--------|--------|
| 14-15 | `LearningStatsView.vue` â€” ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ°, streak, Ğ³Ñ€Ğ°Ñ„Ğ¸ĞºĞ¸ |
| 15-16 | Ğ Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ ÑƒÑ€Ğ¾ĞºĞ¾Ğ² Ñ‡ĞµÑ€ĞµĞ· ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğ¹ `calendar`, push-Ğ½Ğ°Ğ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°Ğ½Ğ¸Ñ |
| 16-17 | ĞĞ´Ğ°Ğ¿Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ Ğ¿Ğ»Ğ°Ğ½: ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²ĞºĞ° Ğ½Ğ° Ğ¾ÑĞ½Ğ¾Ğ²Ğµ `user_errors` Ğ¸ `lesson_progress` |
| 17-18 | ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ: ĞºÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚Ğ¾Ğ², batching embeddings, ÑÑ‚Ñ€Ğ¸Ğ¼Ğ¸Ğ½Ğ³ TTS |
| 18 | E2E Ñ‚ĞµÑÑ‚Ñ‹ (Playwright), Ğ½Ğ°Ğ³Ñ€ÑƒĞ·Ğ¾Ñ‡Ğ½Ğ¾Ğµ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ, Ğ´ĞµĞ¿Ğ»Ğ¾Ğ¹ |

**Ğ˜Ñ‚Ğ¾Ğ³Ğ¾: ~18 Ğ½ĞµĞ´ĞµĞ»ÑŒ** (vs 24 Ğ½ĞµĞ´ĞµĞ»Ğ¸ Ğ² Ğ¾Ñ€Ğ¸Ğ³Ğ¸Ğ½Ğ°Ğ»Ğµ â€” ÑĞºĞ¾Ğ½Ğ¾Ğ¼Ğ¸Ñ Ğ·Ğ° ÑÑ‡Ñ‘Ñ‚ Ğ¿ĞµÑ€ĞµĞ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ).

---

## 9. ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸ ÑƒÑĞ¿ĞµÑ…Ğ°

| ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ° | Ğ¦ĞµĞ»ÑŒ |
|---------|------|
| Retention (7 Ğ´Ğ½ĞµĞ¹) | > 40% |
| Ğ¡Ñ€ĞµĞ´Ğ½ÑÑ Ğ´Ğ»Ğ¸Ğ½Ğ° ÑĞµÑÑĞ¸Ğ¸ | > 10 Ğ¼Ğ¸Ğ½ÑƒÑ‚ |
| Ğ¡ĞµÑÑĞ¸Ğ¹ Ğ² Ğ½ĞµĞ´ĞµĞ»Ñ Ğ½Ğ° Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ | > 3 |
| NPS (Net Promoter Score) | > 50 |
| ĞŸÑ€Ğ¾Ğ³Ñ€ĞµÑÑ Ğ¿Ğ¾ Ğ¿Ğ»Ğ°Ğ½Ñƒ Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ñ | > 70% Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞ°ÑÑ‚ Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¹ Ğ¼Ğ¾Ğ´ÑƒĞ»ÑŒ |
| Ğ¢Ğ¾Ñ‡Ğ½Ğ¾ÑÑ‚ÑŒ ĞºĞ¾Ñ€Ñ€ĞµĞºÑ†Ğ¸Ğ¸ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº | > 90% |
| Ğ›Ğ°Ñ‚ĞµĞ½Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ° AI (Ñ‚ĞµĞºÑÑ‚) | < 3 ÑĞµĞº |
| Ğ›Ğ°Ñ‚ĞµĞ½Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ° AI (Ğ³Ğ¾Ğ»Ğ¾Ñ) | < 5 ÑĞµĞº |

---

## 10. Ğ Ğ¸ÑĞºĞ¸ Ğ¸ Ğ¼Ğ¸Ñ‚Ğ¸Ğ³Ğ°Ñ†Ğ¸Ñ

| Ğ Ğ¸ÑĞº | Ğ’ĞµÑ€Ğ¾ÑÑ‚Ğ½Ğ¾ÑÑ‚ÑŒ | Ğ’Ğ»Ğ¸ÑĞ½Ğ¸Ğµ | ĞœĞ¸Ñ‚Ğ¸Ğ³Ğ°Ñ†Ğ¸Ñ |
|------|-------------|---------|-----------|
| ĞœĞ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ñ MySQL â†’ PostgreSQL Ğ»Ğ¾Ğ¼Ğ°ĞµÑ‚ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğ¹ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ» | Ğ¡Ñ€ĞµĞ´Ğ½ÑÑ | ĞšÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ | Drizzle ORM Ğ°Ğ±ÑÑ‚Ñ€Ğ°Ğ³Ğ¸Ñ€ÑƒĞµÑ‚ Ğ´Ğ¸Ğ°Ğ»ĞµĞºÑ‚; Ğ¿Ğ¾ĞºÑ€Ñ‹Ñ‚Ğ¸Ğµ Ñ‚ĞµÑÑ‚Ğ°Ğ¼Ğ¸ Ğ´Ğ¾ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸; Ğ¿Ğ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»ÑŒĞ½Ğ°Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ° Ğ´Ğ²ÑƒÑ… Ğ‘Ğ” Ğ² Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ğ½Ñ‹Ğ¹ Ğ¿ĞµÑ€Ğ¸Ğ¾Ğ´ |
| Ğ’Ñ‹ÑĞ¾ĞºĞ°Ñ ÑÑ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ API (LLM + TTS + Embeddings) | Ğ’Ñ‹ÑĞ¾ĞºĞ°Ñ | Ğ’Ñ‹ÑĞ¾ĞºĞ¾Ğµ | ĞšÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ² Redis, Ğ»Ğ¸Ğ¼Ğ¸Ñ‚Ñ‹ Ğ½Ğ° Ğ±ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ğ¾Ğ¼ Ğ¿Ğ»Ğ°Ğ½Ğµ, batching embeddings, ÑÑ‚Ñ€Ğ¸Ğ¼Ğ¸Ğ½Ğ³ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ¾Ğ² |
| Ğ—Ğ°Ğ´ĞµÑ€Ğ¶ĞºĞ° Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ñ‹Ñ… Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ¾Ğ² | Ğ¡Ñ€ĞµĞ´Ğ½ÑÑ | Ğ¡Ñ€ĞµĞ´Ğ½ĞµĞµ | Ğ¡Ñ‚Ñ€Ğ¸Ğ¼Ğ¸Ğ½Ğ³ ElevenLabs TTS, Ğ¿Ğ¾ĞºĞ°Ğ· Ñ‚ĞµĞºÑÑ‚Ğ° Ğ´Ğ¾ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ°ÑƒĞ´Ğ¸Ğ¾, Ğ¿Ñ€ĞµĞ´Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ´Ğ»Ñ Ñ‚Ğ¸Ğ¿Ğ¾Ğ²Ñ‹Ñ… Ñ„Ñ€Ğ°Ğ· |
| ĞĞµĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ñ‹Ğµ Ğ¾Ñ‚Ğ²ĞµÑ‚Ñ‹ / ĞºĞ¾Ñ€Ñ€ĞµĞºÑ†Ğ¸Ğ¸ AI | Ğ¡Ñ€ĞµĞ´Ğ½ÑÑ | Ğ’Ñ‹ÑĞ¾ĞºĞ¾Ğµ | Ğ¡Ğ¿ĞµÑ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚Ñ‹, Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ, A/B Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚Ğ¾Ğ², fallback Ğ½Ğ° rule-based grammar check |
| ĞŸĞ¾Ñ‚ĞµÑ€Ñ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğ° Ğ¿Ñ€Ğ¸ Ğ´Ğ»Ğ¸Ğ½Ğ½Ñ‹Ñ… Ğ´Ğ¸Ğ°Ğ»Ğ¾Ğ³Ğ°Ñ… | Ğ¡Ñ€ĞµĞ´Ğ½ÑÑ | Ğ¡Ñ€ĞµĞ´Ğ½ĞµĞµ | pgvector ÑĞµĞ¼Ğ°Ğ½Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ¿Ğ¾Ğ¸ÑĞº, ÑĞ°Ğ¼Ğ¼Ğ°Ñ€Ğ¸ ÑĞµÑÑĞ¸Ğ¹, sliding window Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ñ… ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ |
| Ğ Ğ¾ÑÑ‚ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€Ğ° Ğ²ĞµĞºÑ‚Ğ¾Ñ€Ğ½Ğ¾Ğ¹ Ğ‘Ğ” | ĞĞ¸Ğ·ĞºĞ°Ñ | Ğ¡Ñ€ĞµĞ´Ğ½ĞµĞµ | IVFFlat Ğ¸Ğ½Ğ´ĞµĞºÑÑ‹, Ğ¿ĞµÑ€Ğ¸Ğ¾Ğ´Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ°Ñ€Ñ…Ğ¸Ğ²Ğ°Ñ†Ğ¸Ñ ÑÑ‚Ğ°Ñ€Ñ‹Ñ… embeddings, HNSW Ğ¿Ñ€Ğ¸ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğ¸ |
| ĞŸÑ€Ğ¸Ğ²ÑĞ·Ğ°Ğ½Ğ½Ğ¾ÑÑ‚ÑŒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ğº AI-Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ñƒ | ĞĞ¸Ğ·ĞºĞ°Ñ | Ğ¡Ñ€ĞµĞ´Ğ½ĞµĞµ | ĞĞ°Ğ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°Ğ½Ğ¸Ñ Ğ¾ Ğ¿Ñ€Ğ¸Ñ€Ğ¾Ğ´Ğµ AI, Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ğ¸ Ğ¶Ğ¸Ğ²Ğ¾Ğ³Ğ¾ Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ, ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»ÑŒ rapport level |

---

## 11. ĞœĞ¾Ğ½ĞµÑ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ

| Ğ¢Ğ°Ñ€Ğ¸Ñ„ | Ğ¦ĞµĞ½Ğ° | Ğ’ĞºĞ»ÑÑ‡ĞµĞ½Ğ¾ |
|-------|------|----------|
| Free | 0 | 3 ÑĞµÑÑĞ¸Ğ¸/Ğ´ĞµĞ½ÑŒ (Ñ‚ĞµĞºÑÑ‚), Ğ±Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹ Ğ¿Ğ»Ğ°Ğ½, 50 ÑĞ»Ğ¾Ğ² Ğ² ÑĞ»Ğ¾Ğ²Ğ°Ñ€Ğµ |
| Standard | $9.99/Ğ¼ĞµÑ | Ğ‘ĞµĞ·Ğ»Ğ¸Ğ¼Ğ¸Ñ‚Ğ½Ñ‹Ğµ ÑĞµÑÑĞ¸Ğ¸, Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ¾Ğ¹ Ñ€ĞµĞ¶Ğ¸Ğ¼, Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ½Ğ°Ñ Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒ, SRS-ÑĞ»Ğ¾Ğ²Ğ°Ñ€ÑŒ |
| Premium | $19.99/Ğ¼ĞµÑ | Ğ’ÑÑ‘ Ğ¸Ğ· Standard + Ğ²Ñ‹Ğ±Ğ¾Ñ€ Ğ³Ğ¾Ğ»Ğ¾ÑĞ° ElevenLabs, rapport level 3, Ğ¿Ñ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚Ğ½Ğ°Ñ ÑĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒ, Ğ´ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ° |

---

## 12. ĞŸÑ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ: ĞœĞ°Ğ¿Ğ¿Ğ¸Ğ½Ğ³ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ñ… Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²

### Backend â€” Ğ¿ĞµÑ€ĞµĞ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼Ñ‹Ğµ Ñ„Ğ°Ğ¹Ğ»Ñ‹

| Ğ¤Ğ°Ğ¹Ğ» | Ğ§Ñ‚Ğ¾ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ |
|------|-----------------|
| `src/app/controllers/http/message-controller.ts` | Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹ ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»Ğ»ĞµÑ€ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ |
| `src/app/controllers/http/chat-list-controller.ts` | Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ğ°Ğ¼Ğ¸ |
| `src/app/controllers/ws/ws-api-controller.ts` | WebSocket ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ |
| `src/app/services/message-service.ts` | ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ°, Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ, S3-Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° |
| `src/app/services/broadcast-service.ts` | Real-time Ğ´Ğ¾ÑÑ‚Ğ°Ğ²ĞºĞ° |
| `src/app/services/ws-presence-service.ts` | Online-ÑÑ‚Ğ°Ñ‚ÑƒÑ |
| `src/app/services/push-subscription-service.ts` | Push-ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ |
| `src/app/repositories/message-repository.ts` | CRUD ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ |
| `src/app/repositories/contact-list-repository.ts` | CRUD ĞºĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ğ¾Ğ² |
| `src/app/routes/http-routes.ts` | ĞœĞ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ (Ñ€Ğ°ÑÑˆĞ¸Ñ€ÑĞµÑ‚ÑÑ) |
| `src/app/routes/ws-routes.ts` | WS-Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ (Ñ€Ğ°ÑÑˆĞ¸Ñ€ÑĞµÑ‚ÑÑ) |
| `src/vendor/utils/storage/s3.ts` | Ğ¥Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ°ÑƒĞ´Ğ¸Ğ¾/Ğ¼ĞµĞ´Ğ¸Ğ° |
| `src/database/` | ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğº Ğ‘Ğ” (Ğ·Ğ°Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ mysql â†’ pg) |

### Frontend â€” Ğ¿ĞµÑ€ĞµĞ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼Ñ‹Ğµ Ñ„Ğ°Ğ¹Ğ»Ñ‹

| Ğ¤Ğ°Ğ¹Ğ» | Ğ§Ñ‚Ğ¾ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ |
|------|-----------------|
| `src/components/ChatArea.vue` | Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½ Ñ‡Ğ°Ñ‚Ğ° |
| `src/components/MessageItem.vue` | Ğ ĞµĞ½Ğ´ĞµÑ€Ğ¸Ğ½Ğ³ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ |
| `src/components/ContactsList.vue` | Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº ĞºĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ğ¾Ğ² |
| `src/components/VoiceInput.vue` | Ğ“Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ¾Ğ¹ Ğ²Ğ²Ğ¾Ğ´ |
| `src/components/AudioWaveform.vue` | ĞÑƒĞ´Ğ¸Ğ¾-Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ |
| `src/components/VideoCallModal.vue` | Ğ’Ğ¸Ğ´ĞµĞ¾Ğ·Ğ²Ğ¾Ğ½ĞºĞ¸ (Ğ´Ğ»Ñ pronunciation practice) |
| `src/stores/messages.ts` | Ğ¡Ñ‚ĞµĞ¹Ñ‚ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ |
| `src/stores/contacts.ts` | Ğ¡Ñ‚ĞµĞ¹Ñ‚ ĞºĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ğ¾Ğ² |
| `src/stores/state.ts` | Push, dark mode, PWA |
| `src/utils/api.ts` | API-ĞºĞ»Ğ¸ĞµĞ½Ñ‚ (Ñ€Ğ°ÑÑˆĞ¸Ñ€ÑĞµÑ‚ÑÑ) |
| `src/utils/websocket-base.ts` | WebSocket-ĞºĞ»Ğ¸ĞµĞ½Ñ‚ |
| `src/composables/useBroadcastHandler.ts` | ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° real-time ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹ |
| `src/router/index.ts` | ĞœĞ°Ñ€ÑˆÑ€ÑƒÑ‚Ñ‹ (Ñ€Ğ°ÑÑˆĞ¸Ñ€ÑĞµÑ‚ÑÑ) |
